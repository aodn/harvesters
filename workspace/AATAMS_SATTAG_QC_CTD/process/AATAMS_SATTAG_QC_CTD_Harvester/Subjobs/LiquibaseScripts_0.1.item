<?xml version="1.0" encoding="UTF-8"?>
<talendfile:ProcessType xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:talendfile="platform:/resource/org.talend.model/model/TalendFile.xsd" defaultContext="argo_dev" jobType="Standard">
  <context confirmationNeeded="false" name="argo_dev">
    <contextParameter comment="" name="Destination_Database" prompt="Destination_Database?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_String" value="harvest?ssl=true&amp;sslfactory=org.postgresql.ssl.NonValidatingFactory"/>
    <contextParameter comment="" name="Destination_Login" prompt="Destination_Login?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_String" value="aatams_sattag_qc_ctd"/>
    <contextParameter comment="" name="Destination_Password" prompt="Destination_Password?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_Password" value="PvDktF0rj0sm7SrDjDaBRUhbxVanFiWX"/>
    <contextParameter comment="" name="Destination_Port" prompt="Destination_Port?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_String" value="5432"/>
    <contextParameter comment="" name="Destination_Schema" prompt="Destination_Schema?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_String" value="aatams_sattag_qc_ctd"/>
    <contextParameter comment="" name="Destination_Server" prompt="Destination_Server?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_String" value="10.11.12.13"/>
    <contextParameter comment="" name="logDir" prompt="logDir?" promptNeeded="false" repositoryContextId="_plzQsAM4EeS7uLOnmFTdhQ" type="id_String" value="null"/>
    <contextParameter comment="" name="paramFile" prompt="paramFile?" promptNeeded="false" repositoryContextId="_plzQsAM4EeS7uLOnmFTdhQ" type="id_String" value="null"/>
    <contextParameter comment="" name="jobName" prompt="jobName?" promptNeeded="false" repositoryContextId="_BEs4sAY4EeK4RLc2ENsRtg" type="id_String" value="aatams_sattag_qc_ctd"/>
  </context>
  <context confirmationNeeded="false" name="Default">
    <contextParameter comment="" name="Destination_Database" prompt="Destination_Database?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_String" value="harvest?ssl=true&amp;sslfactory=org.postgresql.ssl.NonValidatingFactory"/>
    <contextParameter comment="" name="Destination_Login" prompt="Destination_Login?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_String" value="aatams_sattag_qc_ctd"/>
    <contextParameter comment="" name="Destination_Password" prompt="Destination_Password?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_Password" value="PvDktF0rj0sm7SrDjDaBRUhbxVanFiWX"/>
    <contextParameter comment="" name="Destination_Port" prompt="Destination_Port?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_String" value="5432"/>
    <contextParameter comment="" name="Destination_Schema" prompt="Destination_Schema?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_String" value="aatams_sattag_qc_ctd"/>
    <contextParameter comment="" name="Destination_Server" prompt="Destination_Server?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_String" value="10.11.12.13"/>
    <contextParameter comment="" name="logDir" prompt="logDir?" promptNeeded="false" repositoryContextId="_plzQsAM4EeS7uLOnmFTdhQ" type="id_String" value="null"/>
    <contextParameter comment="" name="paramFile" prompt="paramFile?" promptNeeded="false" repositoryContextId="_plzQsAM4EeS7uLOnmFTdhQ" type="id_String" value="null"/>
    <contextParameter comment="" name="jobName" prompt="jobName?" promptNeeded="false" repositoryContextId="_BEs4sAY4EeK4RLc2ENsRtg" type="id_String" value="aatams_sattag_qc_ctd"/>
  </context>
  <parameters>
    <elementParameter field="TEXT" name="SCREEN_OFFSET_X" value="0" show="false"/>
    <elementParameter field="TEXT" name="SCREEN_OFFSET_Y" value="0" show="false"/>
    <elementParameter field="TEXT" name="REPOSITORY_CONNECTION_ID" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_PROPERTY_TYPENAME" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_HADOOP_DISTRIBUTION" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_HADOOP_VERSION" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_ENABLE_KERBEROS" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_NAME_NODE_PRINCIPAL" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_USERNAME" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_GROUP" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_USE_KEYTAB" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_KT_PRINCIPAL" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_KEY_TAB" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_ENABLE_OO_KERBEROS" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_NAME_NODE_END_POINT" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_JOB_TRACKER_ENDPOINT" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_END_POINT" value="" show="false"/>
    <elementParameter field="CHECK" name="IMPLICITCONTEXT_USE_PROJECT_SETTINGS" value="true" show="false"/>
    <elementParameter field="CHECK" name="STATANDLOG_USE_PROJECT_SETTINGS" value="true" show="false"/>
    <elementParameter field="CHECK" name="MULTI_THREAD_EXECATION" value="false"/>
    <elementParameter field="CHECK" name="IMPLICIT_TCONTEXTLOAD" value="false"/>
    <elementParameter field="RADIO" name="FROM_FILE_FLAG_IMPLICIT_CONTEXT" value="false" show="false"/>
    <elementParameter field="RADIO" name="FROM_DATABASE_FLAG_IMPLICIT_CONTEXT" value="false" show="false"/>
    <elementParameter field="FILE" name="IMPLICIT_TCONTEXTLOAD_FILE" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="FIELDSEPARATOR" value="&quot;&quot;" show="false"/>
    <elementParameter field="TECHNICAL" name="PROPERTY_TYPE_IMPLICIT_CONTEXT:PROPERTY_TYPE" value="" show="false"/>
    <elementParameter field="TECHNICAL" name="PROPERTY_TYPE_IMPLICIT_CONTEXT:REPOSITORY_PROPERTY_TYPE" value="" show="false"/>
    <elementParameter field="CLOSED_LIST" name="DB_TYPE_IMPLICIT_CONTEXT" value="" show="false"/>
    <elementParameter field="CLOSED_LIST" name="DB_VERSION_IMPLICIT_CONTEXT" value="" show="false"/>
    <elementParameter field="TEXT" name="URL_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="TABLE" name="DRIVER_JAR_IMPLICIT_CONTEXT" show="false"/>
    <elementParameter field="TEXT" name="DRIVER_CLASS_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="HOST_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="PORT_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="DBNAME_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="LOCAL_SERVICE_NAME_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="PROPERTIES_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="SCHEMA_DB_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="USER_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="PASSWORD" name="PASS_IMPLICIT_CONTEXT" value="0RMsyjmybrE=" show="false"/>
    <elementParameter field="FILE" name="DBFILE_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="DBTABLE" name="DBTABLE_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="QUERY_CONDITION_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="CLOSED_LIST" name="LOAD_NEW_VARIABLE" value="Warning" show="false"/>
    <elementParameter field="CLOSED_LIST" name="NOT_LOAD_OLD_VARIABLE" value="Warning" show="false"/>
    <elementParameter field="CHECK" name="PRINT_OPERATIONS" value="false" show="false"/>
    <elementParameter field="CHECK" name="DISABLE_ERROR" value="false" show="false"/>
    <elementParameter field="CHECK" name="DISABLE_WARNINGS" value="false" show="false"/>
    <elementParameter field="CHECK" name="DISABLE_INFO" value="false" show="false"/>
    <elementParameter field="CHECK" name="ON_STATCATCHER_FLAG" value="false"/>
    <elementParameter field="CHECK" name="ON_LOGCATCHER_FLAG" value="false"/>
    <elementParameter field="CHECK" name="ON_METERCATCHER_FLAG" value="false"/>
    <elementParameter field="CHECK" name="ON_CONSOLE_FLAG" value="false" show="false"/>
    <elementParameter field="CHECK" name="ON_FILES_FLAG" value="false" show="false"/>
    <elementParameter field="DIRECTORY" name="FILE_PATH" value="&quot;/Users/xavierhoenner/Work/Resources/TOS_DI-r96646-V5.1.3/harvesters/workspace/.metadata&quot;" show="false"/>
    <elementParameter field="TEXT" name="FILENAME_STATS" value="&quot;stats_file.txt&quot;" show="false"/>
    <elementParameter field="TEXT" name="FILENAME_LOGS" value="&quot;logs_file.txt&quot;" show="false"/>
    <elementParameter field="TEXT" name="FILENAME_METTER" value="&quot;meter_file.txt&quot;" show="false"/>
    <elementParameter field="ENCODING_TYPE" name="ENCODING" value="ISO-8859-15" show="false"/>
    <elementParameter field="TECHNICAL" name="ENCODING:ENCODING_TYPE" value="ISO-8859-15" show="false"/>
    <elementParameter field="CHECK" name="ON_DATABASE_FLAG" value="false" show="false"/>
    <elementParameter field="CLOSED_LIST" name="DB_TYPE" value="tJDBCOutput" show="false"/>
    <elementParameter field="CLOSED_LIST" name="DB_VERSION" value="ojdbc14-10g.jar" show="false"/>
    <elementParameter field="TEXT" name="URL" value="&quot;&quot;" show="false"/>
    <elementParameter field="TABLE" name="DRIVER_JAR" show="false"/>
    <elementParameter field="TEXT" name="DRIVER_CLASS" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="HOST" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="PORT" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="DATASOURCE" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="DBNAME" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="LOCAL_SERVICE_NAME" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="PROPERTIES" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="USER" value="&quot;&quot;" show="false"/>
    <elementParameter field="PASSWORD" name="PASS" value="0RMsyjmybrE=" show="false"/>
    <elementParameter field="FILE" name="DBFILE" value="&quot;&quot;" show="false"/>
    <elementParameter field="DBTABLE" name="TABLE_STATS" value="&quot;&quot;" show="false"/>
    <elementParameter field="DBTABLE" name="TABLE_LOGS" value="&quot;&quot;" show="false"/>
    <elementParameter field="DBTABLE" name="TABLE_METER" value="&quot;&quot;" show="false"/>
    <elementParameter field="CHECK" name="CATCH_RUNTIME_ERRORS" value="true" show="false"/>
    <elementParameter field="CHECK" name="CATCH_USER_ERRORS" value="true" show="false"/>
    <elementParameter field="CHECK" name="CATCH_USER_WARNING" value="true" show="false"/>
    <elementParameter field="CHECK" name="CATCH_REALTIME_STATS" value="false" show="false"/>
    <elementParameter field="TEXT" name="HEADERFOOTER_HEADERID" value="" show="false"/>
    <elementParameter field="CHECK" name="HEADER_ENABLED" value="false" show="false"/>
    <elementParameter field="TEXT" name="HEADER_LIBRARY" value="" show="false"/>
    <elementParameter field="TEXT" name="HEADER_CODE" value="" show="false"/>
    <elementParameter field="TEXT" name="HEADER_IMPORT" value="" show="false"/>
    <elementParameter field="TEXT" name="HEADERFOOTER_FOOTERID" value="" show="false"/>
    <elementParameter field="CHECK" name="FOOTER_ENABLED" value="false" show="false"/>
    <elementParameter field="TEXT" name="FOOTER_LIBRARY" value="" show="false"/>
    <elementParameter field="TEXT" name="FOOTER_CODE" value="" show="false"/>
    <elementParameter field="TEXT" name="FOOTER_IMPORT" value="" show="false"/>
    <routinesParameter id="_ybXQEAMgEeShseTX0YMvcA" name="DataOperation"/>
    <routinesParameter id="_ybRJcAMgEeShseTX0YMvcA" name="GeoOperation"/>
    <routinesParameter id="_ybOtMAMgEeShseTX0YMvcA" name="GeometryOperation"/>
    <routinesParameter id="_ybFjQAMgEeShseTX0YMvcA" name="GeometryUtility"/>
    <routinesParameter id="_ybZsUAMgEeShseTX0YMvcA" name="Mathematical"/>
    <routinesParameter id="_ybSXkAMgEeShseTX0YMvcA" name="Numeric"/>
    <routinesParameter id="_ybP7UAMgEeShseTX0YMvcA" name="OpenStreetMap"/>
    <routinesParameter id="_ybUz0AMgEeShseTX0YMvcA" name="Relational"/>
    <routinesParameter id="_yba6cAMgEeShseTX0YMvcA" name="StringHandling"/>
    <routinesParameter id="_ybYeMAMgEeShseTX0YMvcA" name="TalendDataGenerator"/>
    <routinesParameter id="_ybWB8AMgEeShseTX0YMvcA" name="TalendDate"/>
    <routinesParameter id="_ybTlsAMgEeShseTX0YMvcA" name="TalendString"/>
    <routinesParameter id="_BzxlsElWEeK5TPMSOHM6dA" name="ArgoUtils"/>
    <routinesParameter id="_cRn34BQsEeKRFb0vPU_LNg" name="DAPUtils"/>
    <routinesParameter id="_IMfY4Dp8EeKYTu4DLH4cKg" name="NetCDFUtils"/>
    <routinesParameter id="_eVsY8PAIEeuBroji8Frdrg" name="TalendStringUtil"/>
  </parameters>
  <node componentName="iPostgresqlDbUpdate" componentVersion="0.1" offsetLabelX="0" offsetLabelY="0" posX="128" posY="64">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_2" show="false"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:PROPERTY_TYPE" value="REPOSITORY"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:REPOSITORY_PROPERTY_TYPE" value="_HtNvQDKiEeKrFtsLd2Qz2g" show="false"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server"/>
    <elementParameter field="TEXT" name="TYPE" value="POSTGRESQL" show="false"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login"/>
    <elementParameter field="TEXT" name="PASS" value="context.Destination_Password"/>
    <elementParameter field="FILE" name="FILENAME" value="&quot;/par2/talend-team-2.ws/changelog.xml&quot;" show="false"/>
    <elementParameter field="CHECK" name="USE_INLINE_CONTENT" value="true"/>
    <elementParameter field="MEMO" name="INLINE_CONTENT" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?>&#xA;&lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd&quot;>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Create_platform_metadata_table&quot;>&#xA;        &lt;createTable tableName=&quot;platform_metadata&quot;>&#xA;            &lt;column autoIncrement=&quot;true&quot; name=&quot;id&quot; type=&quot;bigserial&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot; primaryKey=&quot;true&quot; primaryKeyName=&quot;platform_metadata_id_pk&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;file_id&quot; type=&quot;int8&quot;/>&#xA;            &lt;column name=&quot;data_type&quot; type=&quot;VARCHAR(16)&quot;/>&#xA;            &lt;column name=&quot;format_version&quot; type=&quot;VARCHAR(4)&quot;/>&#xA;            &lt;column name=&quot;handbook_version&quot; type=&quot;VARCHAR(4)&quot;/>&#xA;            &lt;column name=&quot;date_creation&quot; type=&quot;TIMESTAMP&quot;/>&#xA;            &lt;column name=&quot;date_update&quot; type=&quot;TIMESTAMP&quot;/>&#xA;            &lt;column name=&quot;platform_number&quot; type=&quot;VARCHAR(8)&quot;/>&#xA;            &lt;column name=&quot;inst_reference&quot; type=&quot;VARCHAR(64)&quot;/>&#xA;            &lt;column name=&quot;wmo_inst_type&quot; type=&quot;VARCHAR(4)&quot;/>&#xA;            &lt;column name=&quot;project_name&quot; type=&quot;VARCHAR(64)&quot;/>&#xA;            &lt;column name=&quot;data_centre&quot; type=&quot;VARCHAR(2)&quot;/>&#xA;&#x9;   &lt;column name=&quot;pi_name&quot; type=&quot;VARCHAR(64)&quot;/>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Create_unique_idx_platform_metadata&quot;>&#xA;        &lt;createIndex indexName=&quot;platform_metadata_file_id_idx&quot; tableName=&quot;platform_metadata&quot; unique=&quot;true&quot;>&#xA;            &lt;column name=&quot;file_id&quot;/>&#xA;        &lt;/createIndex>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Create_file_metadata_table&quot;>&#xA;        &lt;sql>&#xA;&#x9;CREATE TABLE aatams_sattag_qc_ctd.file_metadata&#xA;&#x9;(&#xA;  &#x9;id serial,&#xA;&#x9;file_id integer,&#xA;  &#x9;name text,&#xA;  &#x9;value text,&#xA;  &#x9;type text,&#xA;&#x9;CONSTRAINT file_metadata_pk PRIMARY KEY (id),&#xA;  &#x9;CONSTRAINT file_metadata_file_name_uc UNIQUE (file_id, name)&#xA;&#x9;)&#xA;        &lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;&lt;/databaseChangeLog>"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
  </node>
  <node componentName="iPostgresqlDbUpdate" componentVersion="0.1" offsetLabelX="0" offsetLabelY="0" posX="352" posY="64">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_3" show="false"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:PROPERTY_TYPE" value="REPOSITORY"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:REPOSITORY_PROPERTY_TYPE" value="_HtNvQDKiEeKrFtsLd2Qz2g" show="false"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server"/>
    <elementParameter field="TEXT" name="TYPE" value="POSTGRESQL" show="false"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login"/>
    <elementParameter field="TEXT" name="PASS" value="context.Destination_Password"/>
    <elementParameter field="FILE" name="FILENAME" value="&quot;/par2/talend-team-2.ws/changelog.xml&quot;" show="false"/>
    <elementParameter field="CHECK" name="USE_INLINE_CONTENT" value="true"/>
    <elementParameter field="MEMO" name="INLINE_CONTENT" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?>&#xA;&lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd&quot;>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Create_profile_general_table&quot;>&#xA;        &lt;createTable tableName=&quot;profile_general&quot;>&#xA;            &lt;column name=&quot;file_id&quot; type=&quot;int8&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;profile_no&quot; type=&quot;int4&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;platform_number&quot; type=&quot;VARCHAR(8)&quot;/>&#xA;            &lt;column name=&quot;project_name&quot; type=&quot;VARCHAR(64)&quot;/>&#xA;            &lt;column name=&quot;pi_name&quot; type=&quot;VARCHAR(64)&quot;/>&#xA;            &lt;column name=&quot;cycle_number&quot; type=&quot;int4&quot;/>&#xA;            &lt;column name=&quot;direction&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;data_centre&quot; type=&quot;VARCHAR(2)&quot;/>&#xA;            &lt;column name=&quot;dc_reference&quot; type=&quot;VARCHAR(32)&quot;/>&#xA;            &lt;column name=&quot;data_state_indicator&quot; type=&quot;VARCHAR(4)&quot;/>&#xA;            &lt;column name=&quot;data_mode&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;inst_reference&quot; type=&quot;VARCHAR(64)&quot;/>&#xA;            &lt;column name=&quot;wmo_inst_type&quot; type=&quot;VARCHAR(4)&quot;/>&#xA;            &lt;column name=&quot;juld&quot; type=&quot;TIMESTAMP&quot;/>&#xA;            &lt;column name=&quot;juld_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;juld_location&quot; type=&quot;TIMESTAMP&quot;/>&#xA;            &lt;column name=&quot;latitude&quot; type=&quot;FLOAT8(17)&quot;/>&#xA;            &lt;column name=&quot;longitude&quot; type=&quot;FLOAT8(17)&quot;/>&#xA;            &lt;column name=&quot;position_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;positioning_system&quot; type=&quot;VARCHAR(8)&quot;/>&#xA;            &lt;column name=&quot;profile_pres_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;profile_temp_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;profile_psal_qc&quot; type=&quot;char(1)&quot;/>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Add_geom_to_profile_general&quot;>&#xA;        &lt;sql>select AddGeometryColumn('profile_general','position',4326,'GEOMETRY',2)&lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Add_idx_to_profile_general&quot;>&#xA;        &lt;sql>CREATE INDEX profile_general_position_gist ON profile_general USING GIST (position)&lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Check_valid_geom_profile_general&quot;>&#xA;  &lt;sql>ALTER TABLE profile_general ADD CHECK (ST_IsValid(position))&lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Add_pkey_profile_general&quot;>&#xA;        &lt;addPrimaryKey columnNames=&quot;file_id, profile_no&quot; constraintName=&quot;profile_general_pkey&quot; tableName=&quot;profile_general&quot;/>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Create_profile_measurements_table&quot;>&#xA;        &lt;createTable tableName=&quot;profile_measurements&quot;>&#xA;            &lt;column name=&quot;file_id&quot; type=&quot;int8&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;profile_no&quot; type=&quot;int4&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;level_no&quot; type=&quot;int4&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;pres&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;pres_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;pres_adjusted&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;pres_adjusted_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;pres_adjusted_error&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;temp&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;temp_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;temp_adjusted&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;temp_adjusted_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;temp_adjusted_error&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;psal&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;psal_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;psal_adjusted&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;psal_adjusted_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;psal_adjusted_error&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Add_pkey_to_profile_measurements&quot;>&#xA;        &lt;addPrimaryKey columnNames=&quot;file_id, profile_no, level_no&quot; constraintName=&quot;profile_measurements_pkey&quot; tableName=&quot;profile_measurements&quot;/>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Create_profile_metadata_table&quot;>&#xA;        &lt;createTable tableName=&quot;profile_metadata&quot;>&#xA;            &lt;column name=&quot;file_id&quot; type=&quot;int8&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot; primaryKey=&quot;true&quot; primaryKeyName=&quot;profile_metadata_pkey&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;data_type&quot; type=&quot;VARCHAR(16)&quot;/>&#xA;            &lt;column name=&quot;format_version&quot; type=&quot;VARCHAR(4)&quot;/>&#xA;            &lt;column name=&quot;handbook_version&quot; type=&quot;VARCHAR(4)&quot;/>&#xA;            &lt;column name=&quot;reference_date_time&quot; type=&quot;TIMESTAMP&quot;/>&#xA;            &lt;column name=&quot;date_creation&quot; type=&quot;TIMESTAMP&quot;/>&#xA;            &lt;column name=&quot;date_update&quot; type=&quot;TIMESTAMP&quot;/>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Create_profile_param_calibration_table&quot;>&#xA;        &lt;createTable tableName=&quot;profile_param_calibration&quot;>&#xA;            &lt;column name=&quot;file_id&quot; type=&quot;int8&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;profile_no&quot; type=&quot;int4&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;calib_no&quot; type=&quot;int4&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;param_no&quot; type=&quot;int4&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;parameter&quot; type=&quot;TEXT&quot;/>&#xA;            &lt;column name=&quot;scientific_calib_equation&quot; type=&quot;VARCHAR(256)&quot;/>&#xA;            &lt;column name=&quot;scientific_calib_coefficient&quot; type=&quot;VARCHAR(256)&quot;/>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Add_pkey_to_profile_param_calibration&quot;>&#xA;        &lt;addPrimaryKey columnNames=&quot;file_id, profile_no, calib_no, param_no&quot; constraintName=&quot;profile_param_calibration_pkey&quot; tableName=&quot;profile_param_calibration&quot;/>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Create_profile_params_table&quot;>&#xA;        &lt;createTable tableName=&quot;profile_params&quot;>&#xA;            &lt;column name=&quot;file_id&quot; type=&quot;int8&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;profile_no&quot; type=&quot;int4&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;param_no&quot; type=&quot;int4&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;station_parameters&quot; type=&quot;VARCHAR(16)&quot;/>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Add_pkey_to_profile_params&quot;>&#xA;        &lt;addPrimaryKey columnNames=&quot;file_id, profile_no, param_no&quot; constraintName=&quot;profile_params_pkey&quot; tableName=&quot;profile_params&quot;/>&#xA;    &lt;/changeSet>&#xA;&#xA;&lt;/databaseChangeLog>"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
  </node>
  <node componentName="iPostgresqlDbUpdate" componentVersion="0.1" offsetLabelX="0" offsetLabelY="0" posX="128" posY="256">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_4" show="false"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:PROPERTY_TYPE" value="REPOSITORY"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:REPOSITORY_PROPERTY_TYPE" value="_HtNvQDKiEeKrFtsLd2Qz2g" show="false"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server"/>
    <elementParameter field="TEXT" name="TYPE" value="POSTGRESQL" show="false"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login"/>
    <elementParameter field="TEXT" name="PASS" value="context.Destination_Password"/>
    <elementParameter field="FILE" name="FILENAME" value="&quot;/par2/talend-team-2.ws/changelog.xml&quot;" show="false"/>
    <elementParameter field="CHECK" name="USE_INLINE_CONTENT" value="true"/>
    <elementParameter field="MEMO" name="INLINE_CONTENT" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?>&#xA;&lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd&quot;>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Create_data_centre_table&quot;>&#xA;        &lt;createTable tableName=&quot;data_centre&quot;>&#xA;            &lt;column name=&quot;code&quot; type=&quot;VARCHAR(2)&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot; primaryKey=&quot;true&quot; primaryKeyName=&quot;data_centre_pk&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;name&quot; type=&quot;VARCHAR(20)&quot;/>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;    &#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Insert_data_centre_name&quot;>&#xA;        &lt;insert tableName=&quot;data_centre&quot;>&#xA;             &lt;column name=&quot;code&quot; value=&quot;IF&quot;/>&#xA;             &lt;column name=&quot;name&quot; value=&quot;IFREMER/SISMER&quot;/>&#xA;        &lt;/insert>&#xA;    &lt;/changeSet>&#xA;    &#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Create_region_table&quot;>&#xA;        &lt;createTable tableName=&quot;region&quot;>&#xA;            &lt;column name=&quot;name&quot; type=&quot;VARCHAR(30)&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot; primaryKey=&quot;true&quot; primaryKeyName=&quot;region_pk&quot;/>&#xA;            &lt;/column>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;    &#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Add_constraints_to_region&quot;>&#xA;        &lt;sql>SELECT AddGeometryColumn( 'region', 'geom', 4326, 'GEOMETRY', 2);&lt;/sql>&#xA;        &lt;sql>CREATE INDEX region_geom_idx  ON region  USING gist  (geom);&lt;/sql>&#xA;    &lt;/changeSet>&#xA;    &#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Add_regions_to_region&quot;>&#xA;            &lt;insert tableName=&quot;region&quot;>&#xA;                 &lt;column name=&quot;name&quot; value=&quot;Western Australia&quot;/>&#xA;                 &lt;column name=&quot;geom&quot; value=&quot;0103000020E610000001000000050000000000000000805B4000000000000034C00000000000005E4000000000000034C00000000000005E4000000000008042C00000000000805B4000000000008042C00000000000805B4000000000000034C0&quot;/>&#xA;            &lt;/insert>&#xA;            &lt;insert tableName=&quot;region&quot;>&#xA;                 &lt;column name=&quot;name&quot; value=&quot;South Australia&quot;/>&#xA;                 &lt;column name=&quot;geom&quot; value=&quot;0103000020E610000001000000050000000000000000005E400000000000003EC000000000008061400000000000003EC0000000000080614000000000008042C00000000000005E4000000000008042C00000000000005E400000000000003EC0&quot;/>&#xA;            &lt;/insert>&#xA;            &lt;insert tableName=&quot;region&quot;>&#xA;                 &lt;column name=&quot;name&quot; value=&quot;New South Wales&quot;/>&#xA;                 &lt;column name=&quot;geom&quot; value=&quot;0103000020E6100000010000000500000000000000008061400000000000003EC000000000006063400000000000003EC0000000000060634000000000008046C0000000000080614000000000008046C000000000008061400000000000003EC0&quot;/>&#xA;            &lt;/insert>&#xA;            &lt;insert tableName=&quot;region&quot;>&#xA;                 &lt;column name=&quot;name&quot; value=&quot;Great Barrier Reef&quot;/>&#xA;                 &lt;column name=&quot;geom&quot; value=&quot;0103000020E6100000010000000500000000000000002062400000000000002EC000000000006063400000000000002EC000000000006063400000000000003EC000000000002062400000000000003EC000000000002062400000000000002EC0&quot;/>&#xA;            &lt;/insert>&#xA;            &lt;insert tableName=&quot;region&quot;>&#xA;                 &lt;column name=&quot;name&quot; value=&quot;BlueWater&quot;/>&#xA;                 &lt;column name=&quot;geom&quot; value=&quot;0103000020E6100000050000000500000000000000008066C0000000000080564000000000008066400000000000805640000000000080664000000000008056C000000000008066C000000000008056C000000000008066C00000000000805640050000000000000000805B4000000000000034C00000000000005E4000000000000034C00000000000005E4000000000008042C00000000000805B4000000000008042C00000000000805B4000000000000034C0050000000000000000005E400000000000003EC000000000008061400000000000003EC0000000000080614000000000008042C00000000000005E4000000000008042C00000000000005E400000000000003EC00500000000000000008061400000000000003EC000000000006063400000000000003EC0000000000060634000000000008046C0000000000080614000000000008046C000000000008061400000000000003EC00500000000000000002062400000000000002EC000000000006063400000000000002EC000000000006063400000000000003EC000000000002062400000000000003EC000000000002062400000000000002EC0&quot;/>&#xA;            &lt;/insert>    &#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Check_valid_geom_region&quot;>&#xA;        &lt;update tableName=&quot;region&quot;>&#xA;             &lt;column name=&quot;geom&quot; value=&quot;0103000020E6100000020000000500000000000000008066C0000000000080564000000000008066400000000000805640000000000080664000000000008056C000000000008066C000000000008056C000000000008066C000000000008056400E00000000000000008061400000000000003EC00000000000005E400000000000003EC00000000000005E4000000000000034C00000000000805B4000000000000034C00000000000805B4000000000008042C00000000000005E4000000000008042C0000000000080614000000000008042C0000000000080614000000000008046C0000000000060634000000000008046C000000000006063400000000000003EC000000000006063400000000000002EC000000000002062400000000000002EC000000000002062400000000000003EC000000000008061400000000000003EC0&quot;/>&#xA;             &lt;where>name='BlueWater'&lt;/where>&#xA;        &lt;/update>&#xA;&#xA;        &lt;sql>ALTER TABLE region ADD CHECK (ST_IsValid(geom))&lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Create_getendtoken_function&quot;>&#xA;        &lt;createProcedure>&#xA;             CREATE OR REPLACE FUNCTION getendtoken(p_string character, p_regexp character, p_n integer)&#xA;               RETURNS character AS&#xA;                    'DECLARE&#xA;                    tokens text[]; &#xA;                     BEGIN&#xA;                    select into tokens regexp_split_to_array(p_string, p_regexp); &#xA;                    return (select tokens[array_length(tokens,1)- p_n  + 1]); &#xA;                     END;'&#xA;               LANGUAGE plpgsql VOLATILE&#xA;               COST 100; &#xA;        &lt;/createProcedure>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Create_format_name_function&quot;>&#xA;        &lt;createProcedure>&#xA;             CREATE OR REPLACE FUNCTION format_name(p_name character)&#xA;               RETURNS character AS&#xA;                    'DECLARE&#xA;                    parts text[];&#xA;                     BEGIN&#xA;                    select into parts (regexp_matches(initcap(p_name), ''(.*)[ ,.]([a-zA-Z-]+)''));&#xA;                    return (select parts[2]||'', ''||parts[1]);&#xA;                     END;'&#xA;               LANGUAGE plpgsql VOLATILE&#xA;               COST 100;&#xA;        &lt;/createProcedure>&#xA;    &lt;/changeSet>&#xA;&#xA;   &#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Create_platform_metadata_current_view&quot; runOnChange=&quot;true&quot;>&#xA;        &lt;createView viewName=&quot;platform_metadata_current&quot; replaceIfExists=&quot;true&quot;>&#xA;             SELECT file.url, file.modified, platform_metadata.id, platform_metadata.file_id, platform_metadata.data_type, platform_metadata.format_version, platform_metadata.handbook_version, platform_metadata.date_creation, platform_metadata.date_update, platform_metadata.platform_number, platform_metadata.inst_reference, platform_metadata.wmo_inst_type, platform_metadata.project_name, platform_metadata.data_centre, platform_metadata.pi_name&#xA;               FROM platform_metadata&#xA;               JOIN indexed_file file ON file.id = platform_metadata.file_id AND not file.deleted;&#xA;           &lt;/createView>&#xA;    &lt;/changeSet>&#xA;    &#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Create_profile_general_current_view&quot; failOnError=&quot;true&quot; runOnChange=&quot;true&quot;>&#xA;        &lt;sql>&#xA;            CREATE OR REPLACE VIEW profile_general_current AS ( &#xA;                     SELECT file.url, file.modified, profile.file_id, profile.profile_no, profile.platform_number, profile.project_name, profile.pi_name, profile.cycle_number, profile.direction, profile.data_centre, profile.dc_reference, profile.data_state_indicator, profile.data_mode, profile.inst_reference, profile.wmo_inst_type, profile.juld, profile.juld_qc, profile.juld_location, profile.latitude, profile.longitude, profile.position_qc, profile.positioning_system, profile.profile_pres_qc, profile.profile_temp_qc, profile.profile_psal_qc&#xA;                     FROM profile_general profile&#xA;                     JOIN indexed_file file ON file.id = profile.file_id AND NOT file.deleted)&#xA;         &lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;&lt;changeSet author=&quot;xhoenner&quot; id=&quot;Alter_column_profile_metadata&quot;  runOnChange=&quot;true&quot;>&#xA;    &lt;sql>&#xA;&#xA;      alter table profile_metadata alter column data_type type text;&#xA;&#xA;          DROP VIEW IF EXISTS profile_summary CASCADE;&#xA;          DROP VIEW IF EXISTS srdl_float CASCADE;&#xA;&#xA;      alter table profile_params alter column station_parameters type text;&#xA;&#xA;    &lt;/sql>&#xA;&lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Create_srdl_float_view&quot;  runAlways=&quot;true&quot;>&#xA;        &lt;createView viewName=&quot;srdl_float&quot; replaceIfExists=&quot;true&quot;>&#xA;             SELECT&#xA;                metadata.file_id, &#xA;                getendtoken(metadata.url, '/', 3) as thredds_folder,&#xA;                trim(metadata.platform_number) as platform_number,&#xA;                format_name(regexp_replace(metadata.pi_name,'jamstec','','i')) as pi_name,&#xA;                metadata.data_centre as data_centre_code,&#xA;                (select name from data_centre where code = metadata.data_centre) as data_centre,&#xA;                last_profile.juld as last_measure_date, &#xA;                last_profile_region.name as region,&#xA;                st_xmin(platform_summary.extent) as min_long,&#xA;                st_xmax(platform_summary.extent) as max_long,&#xA;                last_profile.longitude as last_long,&#xA;                st_ymin(platform_summary.extent) as min_lat,&#xA;                st_ymax(platform_summary.extent) as max_lat,&#xA;                last_profile.latitude as last_lat,&#xA;                metadata.modified at time zone 'UTC' as metadata_mod_date,&#xA;                getendtoken(last_profile.url,'/',1) as last_profile_dataset,&#xA;                last_profile.modified at time zone 'UTC' as last_profile_mod_date,&#xA;                lpad(to_hex((trunc((random() * (16777215)::double precision)))::integer), 6, '0') as colour,&#xA;                st_setsrid(st_makepoint(last_profile.longitude, last_profile.latitude), 4326) as last_location&#xA;                FROM platform_metadata_current metadata&#xA;                      LEFT OUTER JOIN &#xA;                        (select trim(data_centre) as data_centre, trim(platform_number) as platform_number, split_part(min((99999-cycle_number)||','||data_mode||','||file_id||','||profile_no),',',3)::integer as last_profile_id, split_part(min((100000-cycle_number)||','||data_mode||','||file_id||','||profile_no),',',4)::integer as last_profile_no, st_extent(st_makepoint(longitude, latitude)) as extent&#xA;                           from profile_general_current&#xA;                          group by trim(data_centre), trim(platform_number)) as platform_summary on (trim(platform_summary.data_centre) = trim(metadata.data_centre) and trim(platform_summary.platform_number) = trim(metadata.platform_number))&#xA;                      LEFT OUTER JOIN profile_general_current as last_profile on (last_profile.file_id = platform_summary.last_profile_id and last_profile.profile_no = platform_summary.last_profile_no)&#xA;                      LEFT OUTER JOIN region as last_profile_region on (ST_Contains(last_profile_region.geom, st_setsrid(st_makepoint(last_profile.longitude, last_profile.latitude),4326)))&#xA;        &lt;/createView>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Create_best_cycle_location_view&quot; runAlways=&quot;true&quot; runOnChange=&quot;true&quot;>&#xA;        &lt;createView viewName=&quot;best_cycle_location&quot; replaceIfExists=&quot;true&quot;>&#xA;            SELECT DISTINCT ON (profile.data_centre, profile.platform_number, profile.cycle_number)&#xA;              file.url, &#xA;              file.modified, &#xA;              profile.*,&#xA;              lag(profile.latitude, 1) OVER (PARTITION BY profile.data_centre, profile.platform_number ORDER BY profile.cycle_number) as last_latitude,&#xA;              lag(profile.longitude, 1) OVER (PARTITION BY profile.data_centre, profile.platform_number ORDER BY profile.cycle_number) as last_longitude&#xA;             FROM profile_general profile&#xA;             JOIN indexed_file file ON file.id = profile.file_id AND not file.deleted&#xA;            WHERE profile.position_qc = '1'&#xA;            ORDER BY profile.data_centre, profile.platform_number, profile.cycle_number,&#xA;              CASE&#xA;                WHEN profile.data_mode = 'D' THEN 0&#xA;                ELSE 1&#xA;              END; &#xA;         &lt;/createView>&#xA;    &lt;/changeSet>&#xA;&#xA;&lt;/databaseChangeLog>"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
  </node>
  <node componentName="iPostgresqlDbUpdate" componentVersion="0.1" offsetLabelX="0" offsetLabelY="0" posX="384" posY="256">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_5" show="false"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:PROPERTY_TYPE" value="REPOSITORY"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:REPOSITORY_PROPERTY_TYPE" value="_HtNvQDKiEeKrFtsLd2Qz2g" show="false"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server"/>
    <elementParameter field="TEXT" name="TYPE" value="POSTGRESQL" show="false"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login"/>
    <elementParameter field="TEXT" name="PASS" value="context.Destination_Password"/>
    <elementParameter field="FILE" name="FILENAME" value="&quot;/opt/TOS_DI-r96646-V5.1.3/workspace_sdi/harvesters/workspace/changelog.xml&quot;" show="false"/>
    <elementParameter field="CHECK" name="USE_INLINE_CONTENT" value="true"/>
    <elementParameter field="MEMO" name="INLINE_CONTENT" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xA;&lt;databaseChangeLog &#xA;    xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;&#xA;    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#xA;    xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd&quot;>&#xA;&#xA;&#xA; &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Create_profile_summary_view&quot; failOnError=&quot;true&quot;  runOnChange = &quot;true&quot;>&#xA;        &lt;sql>     &#xA;          DROP VIEW IF EXISTS profile_summary;&#xA;&#x9;CREATE VIEW profile_summary AS (&#xA;&#x9;WITH m AS (SELECT file_id, &#xA;&#x9;&#x9;MAX(CASE WHEN name = 'smru_platform_code' THEN value ELSE NULL END) AS smru_platform_code,&#xA;&#x9;&#x9;MAX(CASE WHEN name = 'wmo_platform_code' THEN value ELSE NULL END) AS wmo_platform_code,&#xA;&#x9;&#x9;MAX(CASE WHEN name = 'species' THEN value ELSE NULL END) AS species_name,&#xA;&#x9;&#x9;MAX(CASE WHEN name = 'location' THEN value ELSE NULL END) AS release_location&#xA;&#x9;&#x9;FROM file_metadata &#xA;&#x9;&#x9;WHERE name IN ('smru_platform_code', 'wmo_platform_code','species','location')&#xA;&#x9;&#x9;GROUP BY file_id)&#xA;          select profile_general.*, m.smru_platform_code, m.wmo_platform_code, m.species_name, m.release_location&#xA;             from profile_general&#xA;             JOIN m ON m.file_id = profile_general.file_id);&#xA;        &lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA; &lt;changeSet author=&quot;xhoenner&quot; id=&quot;Create_map_and_data_views&quot; failOnError=&quot;true&quot;  runOnChange = &quot;true&quot; >&#xA;        &lt;sql>     &#xA;          DROP VIEW IF EXISTS aatams_sattag_qc_ctd_profile_map CASCADE;&#xA;          DROP VIEW IF EXISTS aatams_sattag_qc_ctd_profile_data CASCADE;&#xA;        &lt;/sql>&#xA;&#xA;        &lt;sql>&#xA;          CREATE VIEW aatams_sattag_qc_ctd_profile_data AS (&#xA;           select&#xA;            url,size, &#xA;            data_centre, platform_number, &#xA;            cycle_number,  direction,&#xA;            data_state_indicator, &#xA;            data_mode, juld, juld_qc, &#xA;            juld_location, latitude, &#xA;            longitude, position_qc,&#xA;            &quot;position&quot;,&#xA;            project_name,&#xA;&#x9;   smru_platform_code, wmo_platform_code, species_name, release_location,&#xA;            level_no, pres, pres_qc, &#xA;            pres_adjusted, pres_adjusted_qc, &#xA;            pres_adjusted_error, temp, &#xA;            temp_qc, temp_adjusted, &#xA;            temp_adjusted_qc, temp_adjusted_error,&#xA;            psal, psal_qc, psal_adjusted, &#xA;            psal_adjusted_qc, psal_adjusted_error&#xA;           FROM profile_summary, profile_measurements, indexed_file&#xA;          WHERE profile_summary.file_id = profile_measurements.file_id AND profile_summary.profile_no = profile_measurements.profile_no and indexed_file.id = profile_measurements.file_id&#xA;          ) ;&#xA;        &lt;/sql>   &#xA;&#xA;    &lt;sql>&#xA;          CREATE VIEW aatams_sattag_qc_ctd_profile_map AS (&#xA;    select &#xA;      profile_summary.*,&#xA;          indexed_file.*&#xA;          from profile_summary&#xA;        left join indexed_file&#xA;        on file_id = indexed_file.id&#xA;     ) ;&#xA;        &lt;/sql>   &#xA;&#xA;    &lt;/changeSet>&#xA;&lt;/databaseChangeLog>"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
  </node>
  <node componentName="iPostgresqlDbUpdate" componentVersion="0.1" offsetLabelX="0" offsetLabelY="0" posX="640" posY="256">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_6" show="false"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:PROPERTY_TYPE" value="REPOSITORY"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:REPOSITORY_PROPERTY_TYPE" value="_HtNvQDKiEeKrFtsLd2Qz2g" show="false"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server"/>
    <elementParameter field="TEXT" name="TYPE" value="POSTGRESQL" show="false"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login"/>
    <elementParameter field="TEXT" name="PASS" value="context.Destination_Password"/>
    <elementParameter field="FILE" name="FILENAME" value="&quot;/par2/talend-team-2.ws/changelog.xml&quot;" show="false"/>
    <elementParameter field="CHECK" name="USE_INLINE_CONTENT" value="true"/>
    <elementParameter field="MEMO" name="INLINE_CONTENT" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?>&#xA;&lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd&quot;>&#xA;&#xA;&lt;changeSet author=&quot;xhoenner&quot; id=&quot;Create_srdl_float_aodn_view&quot; runAlways=&quot;true&quot;>&#xA;       &lt;sql>&#xA;DROP  VIEW IF EXISTS srdl_float_aodn;&#xA;CREATE OR REPLACE  VIEW srdl_float_aodn AS &#xA;SELECT srdl_float.file_id as id,&#xA;    srdl_float.thredds_folder,&#xA;    srdl_float.platform_number,&#xA;    srdl_float.pi_name,&#xA;    srdl_float.data_centre_code,&#xA;    srdl_float.data_centre,&#xA;    srdl_float.last_measure_date,&#xA;    srdl_float.region,&#xA;    srdl_float.min_long,&#xA;    srdl_float.max_long,&#xA;    srdl_float.last_long,&#xA;    srdl_float.min_lat,&#xA;    srdl_float.max_lat,&#xA;    srdl_float.last_lat,&#xA;    srdl_float.metadata_mod_date,&#xA;    NULL as trajectory_mod_date,&#xA;    srdl_float.last_profile_dataset,&#xA;    srdl_float.last_profile_mod_date,&#xA;    srdl_float.colour,&#xA;    srdl_float.last_location&#xA;   FROM srdl_float;&#xA;&#xA;       &lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;&lt;/databaseChangeLog>"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
  </node>
  <connection connectorName="SUBJOB_OK" label="OnSubjobOk" lineStyle="1" metaname="iPostgresqlDbUpdate_2" offsetLabelX="0" offsetLabelY="0" source="iPostgresqlDbUpdate_2" target="iPostgresqlDbUpdate_3">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="OnSubjobOk4" show="false"/>
  </connection>
  <connection connectorName="COMPONENT_OK" label="OnComponentOk" lineStyle="3" metaname="iPostgresqlDbUpdate_3" offsetLabelX="0" offsetLabelY="0" source="iPostgresqlDbUpdate_3" target="iPostgresqlDbUpdate_4">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="OnComponentOk3" show="false"/>
  </connection>
  <connection connectorName="SUBJOB_OK" label="OnSubjobOk" lineStyle="1" metaname="iPostgresqlDbUpdate_4" offsetLabelX="0" offsetLabelY="0" source="iPostgresqlDbUpdate_4" target="iPostgresqlDbUpdate_5">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="OnSubjobOk1" show="false"/>
  </connection>
  <connection connectorName="SUBJOB_OK" label="OnSubjobOk" lineStyle="1" metaname="iPostgresqlDbUpdate_5" offsetLabelX="0" offsetLabelY="0" source="iPostgresqlDbUpdate_5" target="iPostgresqlDbUpdate_6">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="OnSubjobOk5" show="false"/>
  </connection>
  <subjob>
    <elementParameter field="CHECK" name="SHOW_SUBJOB_TITLE" value="true"/>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_2" show="false"/>
    <elementParameter field="TEXT" name="SUBJOB_TITLE" value="Create/Update Database Schema"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="160;190;240"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="220;220;250"/>
  </subjob>
  <subjob>
    <elementParameter field="CHECK" name="SHOW_SUBJOB_TITLE" value="true"/>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_3" show="false"/>
    <elementParameter field="TEXT" name="SUBJOB_TITLE" value="Create/Update Database Schema"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="160;190;240"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="220;220;250"/>
  </subjob>
  <subjob>
    <elementParameter field="CHECK" name="SHOW_SUBJOB_TITLE" value="true"/>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_4" show="false"/>
    <elementParameter field="TEXT" name="SUBJOB_TITLE" value="Create SRDL Views and functions"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="160;190;240"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="220;220;250"/>
  </subjob>
  <subjob>
    <elementParameter field="CHECK" name="SHOW_SUBJOB_TITLE" value="true"/>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_5" show="false"/>
    <elementParameter field="TEXT" name="SUBJOB_TITLE" value="Create IMOS Views"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="160;190;240"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="220;220;250"/>
  </subjob>
  <subjob>
    <elementParameter field="CHECK" name="SHOW_SUBJOB_TITLE" value="true"/>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_6" show="false"/>
    <elementParameter field="TEXT" name="SUBJOB_TITLE" value="Create AODN view"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="160;190;240"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="220;220;250"/>
  </subjob>
</talendfile:ProcessType>
