<?xml version="1.0" encoding="UTF-8"?>
<talendfile:ProcessType xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:talendfile="platform:/resource/org.talend.model/model/TalendFile.xsd" defaultContext="Default" jobType="Standard">
  <context confirmationNeeded="false" name="Default">
    <contextParameter comment="" name="Destination_Database" prompt="Destination_Database?" promptNeeded="false" repositoryContextId="_Tq_7EAuXEeO-v4jR06LTxA" type="id_String" value="harvest?loginTimeout=1000&amp;ssl=true&amp;sslfactory=org.postgresql.ssl.NonValidatingFactory"/>
    <contextParameter comment="" name="Destination_Login" prompt="Destination_Login?" promptNeeded="false" repositoryContextId="_Tq_7EAuXEeO-v4jR06LTxA" type="id_String" value="soop_trv"/>
    <contextParameter comment="" name="Destination_Password" prompt="Destination_Password?" promptNeeded="false" repositoryContextId="_Tq_7EAuXEeO-v4jR06LTxA" type="id_Password" value="CXSggXh4UJfH4+sCNfftjg=="/>
    <contextParameter comment="" name="Destination_Port" prompt="Destination_Port?" promptNeeded="false" repositoryContextId="_Tq_7EAuXEeO-v4jR06LTxA" type="id_String" value="5432"/>
    <contextParameter comment="" name="Destination_Schema" prompt="Destination_Schema?" promptNeeded="false" repositoryContextId="_Tq_7EAuXEeO-v4jR06LTxA" type="id_String" value="soop_trv"/>
    <contextParameter comment="" name="Destination_Server" prompt="Destination_Server?" promptNeeded="false" repositoryContextId="_Tq_7EAuXEeO-v4jR06LTxA" type="id_String" value="harvest-db-aodnstack-lbesnard.dev.aodn.org.au"/>
    <contextParameter comment="" name="logDir" prompt="logDir?" promptNeeded="false" repositoryContextId="_1TC3MFL9EeOUYeJDXGjB-Q" type="id_String" value="/tmp"/>
    <contextParameter comment="" name="paramFile" prompt="paramFile?" promptNeeded="false" repositoryContextId="_1TC3MFL9EeOUYeJDXGjB-Q" type="id_String" value="null"/>
    <contextParameter comment="" name="Metadata_Password" prompt="Metadata_Password?" promptNeeded="false" repositoryContextId="_ieGfwE6bEeSegcAq0Za1rg" type="id_String" value="admin"/>
    <contextParameter comment="" name="Metadata_SpatialColumn" prompt="Metadata_SpatialColumn?" promptNeeded="false" repositoryContextId="_ieGfwE6bEeSegcAq0Za1rg" type="id_String" value="geom"/>
    <contextParameter comment="" name="Metadata_SpatialResolution" prompt="Metadata_SpatialResolution?" promptNeeded="false" repositoryContextId="_ieGfwE6bEeSegcAq0Za1rg" type="id_String" value="2"/>
    <contextParameter comment="" name="Metadata_SpatialTable" prompt="Metadata_SpatialTable?" promptNeeded="false" repositoryContextId="_ieGfwE6bEeSegcAq0Za1rg" type="id_String" value="soop_trv_trajectory_map"/>
    <contextParameter comment="" name="Metadata_URL" prompt="Metadata_URL?" promptNeeded="false" repositoryContextId="_ieGfwE6bEeSegcAq0Za1rg" type="id_String" value="http://10.11.12.13/geonetwork"/>
    <contextParameter comment="" name="Metadata_Username" prompt="Metadata_Username?" promptNeeded="false" repositoryContextId="_ieGfwE6bEeSegcAq0Za1rg" type="id_String" value="admin"/>
    <contextParameter comment="" name="Metadata_UUID" prompt="Metadata_UUID?" promptNeeded="false" repositoryContextId="_ieGfwE6bEeSegcAq0Za1rg" type="id_String" value="8af21108-c535-43bf-8dab-c1f45a26088c"/>
    <contextParameter comment="" name="base" prompt="base?" promptNeeded="false" repositoryContextId="_EMU5IED2EeO4PMQpaPeV8A" type="id_String" value=""/>
    <contextParameter comment="" name="fileList" prompt="fileList?" promptNeeded="false" repositoryContextId="_EMU5IED2EeO4PMQpaPeV8A" type="id_String" value="/vagrant/src/tmp/fileList"/>
  </context>
  <context confirmationNeeded="false" name="Deployment">
    <contextParameter comment="" name="Destination_Database" prompt="Destination_Database?" promptNeeded="false" repositoryContextId="_Tq_7EAuXEeO-v4jR06LTxA" type="id_String" value="harvest?loginTimeout=1000&amp;ssl=true&amp;sslfactory=org.postgresql.ssl.NonValidatingFactory"/>
    <contextParameter comment="" name="Destination_Login" prompt="Destination_Login?" promptNeeded="false" repositoryContextId="_Tq_7EAuXEeO-v4jR06LTxA" type="id_String" value="soop_trv"/>
    <contextParameter comment="" name="Destination_Password" prompt="Destination_Password?" promptNeeded="false" repositoryContextId="_Tq_7EAuXEeO-v4jR06LTxA" type="id_Password" value="CXSggXh4UJfH4+sCNfftjg=="/>
    <contextParameter comment="" name="Destination_Port" prompt="Destination_Port?" promptNeeded="false" repositoryContextId="_Tq_7EAuXEeO-v4jR06LTxA" type="id_String" value="5432"/>
    <contextParameter comment="" name="Destination_Schema" prompt="Destination_Schema?" promptNeeded="false" repositoryContextId="_Tq_7EAuXEeO-v4jR06LTxA" type="id_String" value="soop_trv"/>
    <contextParameter comment="" name="Destination_Server" prompt="Destination_Server?" promptNeeded="false" repositoryContextId="_Tq_7EAuXEeO-v4jR06LTxA" type="id_String" value="#{node['talend']['destination_database_server']}"/>
    <contextParameter comment="" name="logDir" prompt="logDir?" promptNeeded="false" repositoryContextId="_1TC3MFL9EeOUYeJDXGjB-Q" type="id_String" value="/tmp"/>
    <contextParameter comment="" name="paramFile" prompt="paramFile?" promptNeeded="false" repositoryContextId="_1TC3MFL9EeOUYeJDXGjB-Q" type="id_String" value="null"/>
    <contextParameter comment="" name="Metadata_Password" prompt="Metadata_Password?" promptNeeded="false" repositoryContextId="_ieGfwE6bEeSegcAq0Za1rg" type="id_String" value="admin"/>
    <contextParameter comment="" name="Metadata_SpatialColumn" prompt="Metadata_SpatialColumn?" promptNeeded="false" repositoryContextId="_ieGfwE6bEeSegcAq0Za1rg" type="id_String" value="geom"/>
    <contextParameter comment="" name="Metadata_SpatialResolution" prompt="Metadata_SpatialResolution?" promptNeeded="false" repositoryContextId="_ieGfwE6bEeSegcAq0Za1rg" type="id_String" value="2"/>
    <contextParameter comment="" name="Metadata_SpatialTable" prompt="Metadata_SpatialTable?" promptNeeded="false" repositoryContextId="_ieGfwE6bEeSegcAq0Za1rg" type="id_String" value="soop_trv_trajectory_map"/>
    <contextParameter comment="" name="Metadata_URL" prompt="Metadata_URL?" promptNeeded="false" repositoryContextId="_ieGfwE6bEeSegcAq0Za1rg" type="id_String" value="http://10.11.12.13/geonetwork"/>
    <contextParameter comment="" name="Metadata_Username" prompt="Metadata_Username?" promptNeeded="false" repositoryContextId="_ieGfwE6bEeSegcAq0Za1rg" type="id_String" value="admin"/>
    <contextParameter comment="" name="Metadata_UUID" prompt="Metadata_UUID?" promptNeeded="false" repositoryContextId="_ieGfwE6bEeSegcAq0Za1rg" type="id_String" value="8af21108-c535-43bf-8dab-c1f45a26088c"/>
    <contextParameter comment="" name="base" prompt="base?" promptNeeded="false" repositoryContextId="_EMU5IED2EeO4PMQpaPeV8A" type="id_String" value="null"/>
    <contextParameter comment="" name="fileList" prompt="fileList?" promptNeeded="false" repositoryContextId="_EMU5IED2EeO4PMQpaPeV8A" type="id_String" value="null"/>
  </context>
  <parameters>
    <elementParameter field="TEXT" name="SCREEN_OFFSET_X" value="320" show="false"/>
    <elementParameter field="TEXT" name="SCREEN_OFFSET_Y" value="0" show="false"/>
    <elementParameter field="TEXT" name="REPOSITORY_CONNECTION_ID" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_PROPERTY_TYPENAME" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_HADOOP_DISTRIBUTION" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_HADOOP_VERSION" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_ENABLE_KERBEROS" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_NAME_NODE_PRINCIPAL" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_USERNAME" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_GROUP" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_USE_KEYTAB" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_KT_PRINCIPAL" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_KEY_TAB" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_ENABLE_OO_KERBEROS" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_NAME_NODE_END_POINT" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_JOB_TRACKER_ENDPOINT" value="" show="false"/>
    <elementParameter field="TEXT" name="OOZIE_END_POINT" value="" show="false"/>
    <elementParameter field="CHECK" name="IMPLICITCONTEXT_USE_PROJECT_SETTINGS" value="false" show="false"/>
    <elementParameter field="CHECK" name="STATANDLOG_USE_PROJECT_SETTINGS" value="false" show="false"/>
    <elementParameter field="CHECK" name="MULTI_THREAD_EXECATION" value="false"/>
    <elementParameter field="CHECK" name="IMPLICIT_TCONTEXTLOAD" value="true"/>
    <elementParameter field="RADIO" name="FROM_FILE_FLAG_IMPLICIT_CONTEXT" value="true"/>
    <elementParameter field="RADIO" name="FROM_DATABASE_FLAG_IMPLICIT_CONTEXT" value="false"/>
    <elementParameter field="FILE" name="IMPLICIT_TCONTEXTLOAD_FILE" value="context.paramFile"/>
    <elementParameter field="TEXT" name="FIELDSEPARATOR" value="&quot;=>&quot;"/>
    <elementParameter field="CLOSED_LIST" name="DB_TYPE_IMPLICIT_CONTEXT" value="" show="false"/>
    <elementParameter field="CLOSED_LIST" name="DB_VERSION_IMPLICIT_CONTEXT" value="" show="false"/>
    <elementParameter field="TEXT" name="URL_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="TABLE" name="DRIVER_JAR_IMPLICIT_CONTEXT" show="false"/>
    <elementParameter field="TEXT" name="DRIVER_CLASS_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="HOST_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="PORT_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="DBNAME_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="LOCAL_SERVICE_NAME_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="PROPERTIES_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="SCHEMA_DB_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="USER_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="PASSWORD" name="PASS_IMPLICIT_CONTEXT" value="0RMsyjmybrE=" show="false"/>
    <elementParameter field="FILE" name="DBFILE_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="DBTABLE" name="DBTABLE_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="QUERY_CONDITION_IMPLICIT_CONTEXT" value="&quot;&quot;" show="false"/>
    <elementParameter field="CLOSED_LIST" name="LOAD_NEW_VARIABLE" value="Warning"/>
    <elementParameter field="CLOSED_LIST" name="NOT_LOAD_OLD_VARIABLE" value="Warning"/>
    <elementParameter field="CHECK" name="PRINT_OPERATIONS" value="false"/>
    <elementParameter field="CHECK" name="DISABLE_ERROR" value="false"/>
    <elementParameter field="CHECK" name="DISABLE_WARNINGS" value="true"/>
    <elementParameter field="CHECK" name="DISABLE_INFO" value="false"/>
    <elementParameter field="CHECK" name="ON_STATCATCHER_FLAG" value="true"/>
    <elementParameter field="CHECK" name="ON_LOGCATCHER_FLAG" value="true"/>
    <elementParameter field="CHECK" name="ON_METERCATCHER_FLAG" value="false"/>
    <elementParameter field="CHECK" name="ON_CONSOLE_FLAG" value="false"/>
    <elementParameter field="CHECK" name="ON_FILES_FLAG" value="true"/>
    <elementParameter field="DIRECTORY" name="FILE_PATH" value="context.logDir"/>
    <elementParameter field="TEXT" name="FILENAME_STATS" value="&quot;stats_file.txt&quot;"/>
    <elementParameter field="TEXT" name="FILENAME_LOGS" value="&quot;logs_file.txt&quot;"/>
    <elementParameter field="TEXT" name="FILENAME_METTER" value="&quot;meter_file.txt&quot;" show="false"/>
    <elementParameter field="ENCODING_TYPE" name="ENCODING" value="ISO-8859-15"/>
    <elementParameter field="TECHNICAL" name="ENCODING:ENCODING_TYPE" value="ISO-8859-15"/>
    <elementParameter field="CHECK" name="ON_DATABASE_FLAG" value="false"/>
    <elementParameter field="CLOSED_LIST" name="DB_TYPE" value="tJDBCOutput" show="false"/>
    <elementParameter field="CLOSED_LIST" name="DB_VERSION" value="ORACLE_10" show="false"/>
    <elementParameter field="TEXT" name="URL" value="&quot;&quot;" show="false"/>
    <elementParameter field="TABLE" name="DRIVER_JAR" show="false"/>
    <elementParameter field="TEXT" name="DRIVER_CLASS" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="HOST" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="PORT" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="DATASOURCE" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="DBNAME" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="LOCAL_SERVICE_NAME" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="PROPERTIES" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="&quot;&quot;" show="false"/>
    <elementParameter field="TEXT" name="USER" value="&quot;&quot;" show="false"/>
    <elementParameter field="PASSWORD" name="PASS" value="0RMsyjmybrE=" show="false"/>
    <elementParameter field="FILE" name="DBFILE" value="&quot;&quot;" show="false"/>
    <elementParameter field="DBTABLE" name="TABLE_STATS" value="&quot;&quot;" show="false"/>
    <elementParameter field="DBTABLE" name="TABLE_LOGS" value="&quot;&quot;" show="false"/>
    <elementParameter field="DBTABLE" name="TABLE_METER" value="&quot;&quot;" show="false"/>
    <elementParameter field="CHECK" name="CATCH_RUNTIME_ERRORS" value="true"/>
    <elementParameter field="CHECK" name="CATCH_USER_ERRORS" value="true"/>
    <elementParameter field="CHECK" name="CATCH_USER_WARNING" value="true"/>
    <elementParameter field="CHECK" name="CATCH_REALTIME_STATS" value="false"/>
    <elementParameter field="TEXT" name="HEADERFOOTER_HEADERID" value="" show="false"/>
    <elementParameter field="CHECK" name="HEADER_ENABLED" value="false" show="false"/>
    <elementParameter field="TEXT" name="HEADER_LIBRARY" value="" show="false"/>
    <elementParameter field="TEXT" name="HEADER_CODE" value="" show="false"/>
    <elementParameter field="TEXT" name="HEADER_IMPORT" value="" show="false"/>
    <elementParameter field="TEXT" name="HEADERFOOTER_FOOTERID" value="" show="false"/>
    <elementParameter field="CHECK" name="FOOTER_ENABLED" value="false" show="false"/>
    <elementParameter field="TEXT" name="FOOTER_LIBRARY" value="" show="false"/>
    <elementParameter field="TEXT" name="FOOTER_CODE" value="" show="false"/>
    <elementParameter field="TEXT" name="FOOTER_IMPORT" value="" show="false"/>
    <routinesParameter id="_CtmWkEKREeO8W7a6ZFHFqQ" name="DataOperation"/>
    <routinesParameter id="_Ctr2IEKREeO8W7a6ZFHFqQ" name="GeoOperation"/>
    <routinesParameter id="_CtwHkEKREeO8W7a6ZFHFqQ" name="GeometryOperation"/>
    <routinesParameter id="_CtqA8EKREeO8W7a6ZFHFqQ" name="GeometryUtility"/>
    <routinesParameter id="_Cs2vsEKREeO8W7a6ZFHFqQ" name="Mathematical"/>
    <routinesParameter id="_CtfB0EKREeO8W7a6ZFHFqQ" name="Numeric"/>
    <routinesParameter id="_CtuSYEKREeO8W7a6ZFHFqQ" name="OpenStreetMap"/>
    <routinesParameter id="_CtheEEKREeO8W7a6ZFHFqQ" name="Relational"/>
    <routinesParameter id="_CtoLwEKREeO8W7a6ZFHFqQ" name="StringHandling"/>
    <routinesParameter id="_CtisMEKREeO8W7a6ZFHFqQ" name="TalendDataGenerator"/>
    <routinesParameter id="_CtgP8EKREeO8W7a6ZFHFqQ" name="TalendDate"/>
    <routinesParameter id="_Ctj6UEKREeO8W7a6ZFHFqQ" name="TalendString"/>
    <routinesParameter id="_BzxlsElWEeK5TPMSOHM6dA" name="ArgoUtils"/>
    <routinesParameter id="_cRn34BQsEeKRFb0vPU_LNg" name="DAPUtils"/>
    <routinesParameter id="_IMfY4Dp8EeKYTu4DLH4cKg" name="NetCDFUtils"/>
    <routinesParameter id="_NMEMEPtrEemNG5UdY7lJtw" name="TalendStringUtil"/>
  </parameters>
  <node componentName="iPostgresqlDbUpdate" componentVersion="0.1" offsetLabelX="0" offsetLabelY="0" posX="256" posY="352">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_1" show="false"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:PROPERTY_TYPE" value="REPOSITORY"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:REPOSITORY_PROPERTY_TYPE" value="_-CdwkAuPEeO-v4jR06LTxA" show="false"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server"/>
    <elementParameter field="TEXT" name="TYPE" value="POSTGRESQL" show="false"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login"/>
    <elementParameter field="TEXT" name="PASS" value="context.Destination_Password"/>
    <elementParameter field="FILE" name="FILENAME" value="&quot;/media/Laurent_emII/TOS_DI-r96646-V5.1.3/workspace_sdi/changelog.xml&quot;" show="false"/>
    <elementParameter field="CHECK" name="USE_INLINE_CONTENT" value="true"/>
    <elementParameter field="MEMO" name="INLINE_CONTENT" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?>&#xA;&lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd&quot;>&#xA; &#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1382580250154-1&quot;>&#xA;       &lt;sql>&#xA;       CREATE TABLE deployments&#xA;(&#xA;  deploy_id bigserial,&#xA;  file_id integer NOT NULL,&#xA;  time_coverage_start character varying(100),&#xA;  time_coverage_end character varying(100),&#xA;  platform_code character varying(100),&#xA;  file_version character varying(500),&#xA;  aims_channel_id integer,&#xA;  trip_id integer,&#xA;  metadata_uuid character varying(100),&#xA;  cdm_data_type character varying(100),&#xA;  institution character varying(100),&#xA;  data_centre_email character varying(100),&#xA;  principal_investigator_email character varying(100),&#xA;  source character varying(100),&#xA;  project character varying(100),&#xA;  geospatial_vertical_min character varying(100),&#xA;  netcdf_version character varying(100),&#xA;  local_time_zone character varying(100),&#xA;  geospatial_vertical_max character varying(100),&#xA;  data_centre character varying(100),&#xA;  naming_authority character varying(100),&#xA;  author character varying(100),&#xA;  date_created character varying(100),&#xA;  title character varying(100),&#xA;  &quot;references&quot; character varying(100),&#xA;  vessel_name character varying(100),&#xA;  principal_investigator character varying(100),&#xA;  CONSTRAINT deployments_pkey PRIMARY KEY (deploy_id ),&#xA;  CONSTRAINT fk_file_id FOREIGN KEY (file_id)&#xA;      REFERENCES indexed_file (id) MATCH SIMPLE&#xA;      ON UPDATE CASCADE ON DELETE CASCADE&#xA;)&#xA;&#xA;       &lt;/sql>&#xA;    &lt;/changeSet>&#xA;   &#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1382580250154-2&quot;>&#xA;       &lt;sql>&#xA;       CREATE TABLE measurements_cphl&#xA;(&#xA;  file_id integer,&#xA;  measurement bigserial,&#xA;  &quot;TIME&quot; timestamp with time zone,&#xA;  &quot;LATITUDE&quot; double precision,&#xA;  &quot;LATITUDE_quality_control&quot; character(1),&#xA;  &quot;LONGITUDE&quot; double precision,&#xA;  &quot;LONGITUDE_quality_control&quot; character(1),&#xA;  geom geometry,&#xA;  &quot;CPHL&quot; real,&#xA;  &quot;CPHL_quality_control&quot; character(1),&#xA;  trip_id integer,&#xA;  CONSTRAINT measurements_cphl_pkey PRIMARY KEY (measurement ),&#xA;  CONSTRAINT fk_file_id FOREIGN KEY (file_id)&#xA;      REFERENCES indexed_file (id) MATCH SIMPLE&#xA;      ON UPDATE CASCADE ON DELETE CASCADE&#xA;&#xA;)&#xA;      &lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1382580250154-3&quot;>&#xA;       &lt;sql>&#xA;       CREATE TABLE measurements_psal&#xA;(&#xA;  file_id integer,&#xA;  measurement bigserial,&#xA;  &quot;TIME&quot; timestamp with time zone,&#xA;  &quot;LATITUDE&quot; double precision,&#xA;  &quot;LATITUDE_quality_control&quot; character(1),&#xA;  &quot;LONGITUDE&quot; double precision,&#xA;  &quot;LONGITUDE_quality_control&quot; character(1),&#xA;  geom geometry,&#xA;  &quot;PSAL&quot; real,&#xA;  &quot;PSAL_quality_control&quot; character(1),&#xA;  trip_id  smallint,&#xA;  CONSTRAINT measurements_psal_pkey PRIMARY KEY (measurement ),&#xA;  CONSTRAINT fk_file_id FOREIGN KEY (file_id)&#xA;      REFERENCES indexed_file (id) MATCH SIMPLE&#xA;      ON UPDATE CASCADE ON DELETE CASCADE&#xA;)&#xA;       &lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1382580250154-4&quot;>&#xA;       &lt;sql>&#xA;       CREATE TABLE measurements_temp&#xA;(&#xA;  file_id integer,&#xA;  measurement bigserial,&#xA;  &quot;TIME&quot; timestamp with time zone,&#xA;  &quot;LATITUDE&quot; double precision,&#xA;  &quot;LATITUDE_quality_control&quot; character(1),&#xA;  &quot;LONGITUDE&quot; double precision,&#xA;  &quot;LONGITUDE_quality_control&quot; character(1),&#xA;  geom geometry,&#xA;  &quot;TEMP&quot; real,&#xA;  &quot;TEMP_quality_control&quot; character(1),&#xA;  trip_id integer,&#xA;  CONSTRAINT measurements_temp_pkey PRIMARY KEY (measurement ),&#xA;  CONSTRAINT fk_file_id FOREIGN KEY (file_id)&#xA;      REFERENCES indexed_file (id) MATCH SIMPLE&#xA;      ON UPDATE CASCADE ON DELETE CASCADE&#xA;)&#xA;       &lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1382580250154-5&quot;>&#xA;       &lt;sql>&#xA;       CREATE TABLE measurements_turb&#xA;(&#xA;  file_id integer,&#xA;  measurement bigserial,&#xA;  &quot;TIME&quot; timestamp with time zone,&#xA;  &quot;LATITUDE&quot; double precision,&#xA;  &quot;LATITUDE_quality_control&quot; character(1),&#xA;  &quot;LONGITUDE&quot; double precision,&#xA;  &quot;LONGITUDE_quality_control&quot; character(1),&#xA;  geom geometry,&#xA;  &quot;TURB&quot; real,&#xA;  &quot;TURB_quality_control&quot; character(1),&#xA;  trip_id integer,&#xA;  CONSTRAINT measurements_turb_pkey PRIMARY KEY (measurement ),&#xA;  CONSTRAINT fk_file_id FOREIGN KEY (file_id)&#xA;      REFERENCES indexed_file (id) MATCH SIMPLE&#xA;      ON UPDATE CASCADE ON DELETE CASCADE&#xA;)&#xA;       &lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA; &lt;changeSet author=&quot;talend&quot; id=&quot;1382580250154-6&quot;>&#xA;       &lt;sql>&#xA;ALTER TABLE measurements_cphl&#xA;ALTER COLUMN geom TYPE geometry(GEOMETRY, 4326)&#xA;USING ST_SetSRID(geom,4326);&#xA;CREATE INDEX measurements_cphl_gist_idx ON measurements_cphl USING GIST (geom); &#xA; &lt;/sql>&#xA;        &lt;sql>&#xA;ALTER TABLE measurements_psal&#xA;ALTER COLUMN geom TYPE geometry(GEOMETRY, 4326)&#xA;USING ST_SetSRID(geom,4326);&#xA;CREATE INDEX measurements_psal_gist_idx ON measurements_psal USING GIST (geom); &#xA;  &lt;/sql>&#xA;        &lt;sql>&#xA;ALTER TABLE measurements_temp&#xA;ALTER COLUMN geom TYPE geometry(GEOMETRY, 4326)&#xA;USING ST_SetSRID(geom,4326);&#xA;CREATE INDEX measurements_temp_gist_idx ON measurements_temp USING GIST (geom); &#xA;  &lt;/sql>&#xA;        &lt;sql>&#xA;ALTER TABLE measurements_turb&#xA;ALTER COLUMN geom TYPE geometry(GEOMETRY, 4326)&#xA;USING ST_SetSRID(geom,4326);&#xA;CREATE INDEX measurements_turb_gist_idx ON measurements_turb USING GIST (geom); &#xA;  &lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;1382580250154-7&quot;>&#xA;       &lt;sql>&#xA;ALTER TABLE measurements_cphl ADD CHECK (ST_IsValid(geom));&#xA;ALTER TABLE measurements_psal ADD CHECK (ST_IsValid(geom));&#xA;ALTER TABLE measurements_temp ADD CHECK (ST_IsValid(geom));&#xA;ALTER TABLE measurements_turb ADD CHECK (ST_IsValid(geom));&#xA;  &lt;/sql>&#xA;&lt;/changeSet>&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;1382580250154-8&quot;>&#xA;       &lt;sql>&#xA;ALTER TABLE measurements_psal ALTER COLUMN trip_id TYPE integer;&#xA;  &lt;/sql>&#xA;&lt;/changeSet>&#xA;&#xA;&#xA;&#xA; &#xA;       &lt;changeSet author=&quot;talend&quot; id=&quot;createTable_measurements_merged_data&quot;>&#xA;       &lt;sql>&#xA;       CREATE TABLE measurements_merged_data&#xA;(&#xA;  trip_id integer,&#xA;  &quot;TIME&quot; timestamp with time zone,&#xA;  &quot;LATITUDE&quot; double precision,&#xA;  &quot;LONGITUDE&quot; double precision,&#xA;  geom geometry,&#xA;  &quot;TURB&quot; real,&#xA;  &quot;TEMP&quot; real,&#xA;  &quot;CPHL&quot; real,&#xA;  &quot;PSAL&quot; real&#xA;)&#xA;       &lt;/sql>&#xA;    &lt;/changeSet>&#xA;   &#xA;&#xA; &lt;changeSet author=&quot;talend&quot; id=&quot;createTableMaster&quot;>&#xA;        &lt;sql>&#xA;CREATE TABLE table_master&#xA;(&#xA;trip_id integer,&#xA;  &quot;TIME&quot; timestamp with time zone,&#xA;  &quot;LATITUDE&quot; double precision,&#xA;  &quot;LONGITUDE&quot; double precision,&#xA;  geom geometry&#xA;)&#xA;  ;&#xA;  &lt;/sql>&#xA; &lt;/changeSet>&#xA;&#xA; &lt;changeSet author=&quot;talend&quot; id=&quot;1382580250154-9&quot;>&#xA;&#xA;        &lt;sql>&#xA;ALTER TABLE measurements_merged_data&#xA;ALTER COLUMN geom TYPE geometry(GEOMETRY, 4326)&#xA;USING ST_SetSRID(geom,4326);&#xA;  &lt;/sql>&#xA;&#xA;        &lt;sql>&#xA;ALTER TABLE table_master&#xA;ALTER COLUMN geom TYPE geometry(GEOMETRY, 4326)&#xA;USING ST_SetSRID(geom,4326);&#xA;CREATE INDEX table_master_gist_idx ON table_master USING GIST (geom); &#xA;  &lt;/sql>&#xA; &lt;/changeSet>&#xA;&#xA; &lt;changeSet author=&quot;talend&quot; id=&quot;1382580250154-10&quot;>&#xA;        &lt;sql>&#xA;ALTER TABLE measurements_merged_data ADD CHECK (ST_IsValid(geom));&#xA;ALTER TABLE table_master ADD CHECK (ST_IsValid(geom));&#xA;  &lt;/sql>&#xA; &lt;/changeSet>&#xA;&#xA; &lt;changeSet author=&quot;talend&quot; id=&quot;1382580250154-11&quot;>&#xA;        &lt;sql>&#xA;ALTER TABLE table_master add column measurements bigserial;&#xA;  &lt;/sql>&#xA; &lt;/changeSet>&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;1382580250154-12&quot;>&#xA;        &lt;sql>&#xA;CREATE TABLE temporary_sub_select_wms&#xA;(&#xA;  trip_id integer,&#xA;  time_start timestamp with time zone,&#xA;  time_end timestamp with time zone,&#xA;  &quot;TURB&quot; bigint,&#xA;  &quot;TEMP&quot; bigint,&#xA;  &quot;CPHL&quot; bigint,&#xA;  &quot;PSAL&quot; bigint,&#xA;  geom geometry,&#xA;  CONSTRAINT temporary_sub_select_wms_geom_check CHECK (st_isvalid(geom)))&#xA;  &lt;/sql>&#xA; &lt;/changeSet>&#xA;&#xA; &#xA; &lt;changeSet author=&quot;talend&quot; id=&quot;1382580250144-1&quot;>&#xA;       &lt;sql>&#xA; CREATE TABLE vessel_names&#xA;(&#xA;  vessel_name character varying(50) NOT NULL,&#xA;  platform_code character varying(50),&#xA;  colour character varying(50),&#xA;  CONSTRAINT vessel_names_pkey PRIMARY KEY (vessel_name )&#xA;)&#xA;       &lt;/sql>&#xA;    &lt;/changeSet>&#xA;   &#xA;&#xA; &lt;changeSet author=&quot;talend&quot; id=&quot;1382580250144-2&quot;>&#xA;        &lt;sql>&#xA;CREATE TABLE visualisation_wms&#xA;(&#xA;  trip_id integer,&#xA;   metadata_uuid character varying(100),&#xA;  time_start timestamp with time zone,&#xA;  time_end timestamp with time zone,&#xA;  vessel_name character varying(50),&#xA;  colour character varying(50),&#xA;  &quot;TURB_b&quot; boolean,&#xA;  &quot;TEMP_b&quot; boolean,&#xA;  &quot;CPHL_b&quot; boolean,&#xA;  &quot;PSAL_b&quot; boolean,&#xA;  geom geometry,&#xA;  CONSTRAINT visualisation_wms_geom_check CHECK (st_isvalid(geom)))&#xA;&#xA;  &lt;/sql>&#xA; &lt;/changeSet>&#xA;&#xA;&#xA;&lt;changeSet author=&quot;bpasquer&quot; id=&quot;rename_time_variables&quot;>&#xA;    &lt;sql>&#xA;    ALTER TABLE temporary_sub_select_wms RENAME COLUMN time_start TO time_coverage_start;&#xA;    ALTER TABLE temporary_sub_select_wms RENAME COLUMN time_end TO time_coverage_end;&#xA;    ALTER TABLE visualisation_wms RENAME COLUMN time_start TO time_coverage_start;&#xA;    ALTER TABLE visualisation_wms RENAME COLUMN time_end TO time_coverage_end;&#xA;  &#xA;   &lt;/sql>&#xA;  &lt;/changeSet>&#xA;&#xA;&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;1382580250144-3&quot;>&#xA;        &lt;sql>&#xA;ALTER TABLE visualisation_wms&#xA;ALTER COLUMN geom TYPE geometry(GEOMETRY, 4326)&#xA;USING ST_SetSRID(geom,4326);&#xA;CREATE INDEX visualisation_wms_gist_idx ON visualisation_wms USING GIST (geom); &#xA;  &lt;/sql>&#xA; &lt;/changeSet>&#xA;&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;1382580250144-4&quot;>&#xA;        &lt;sql>&#xA;CREATE INDEX visualisation_wms_trip_idx  ON soop_trv.visualisation_wms  USING btree  (trip_id );&#xA;&#xA;ALTER TABLE visualisation_wms ADD CONSTRAINT visualisation_wms_pkey PRIMARY KEY (trip_id );&#xA;ALTER TABLE measurements_merged_data ADD COLUMN measurement bigserial;&#xA;ALTER TABLE measurements_merged_data ADD CONSTRAINT measurements_merged_data_pkey PRIMARY KEY (measurement );&#xA;  &lt;/sql>&#xA; &lt;/changeSet>&#xA;&#xA;&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;map_view&quot; runOnChange=&quot;true&quot;>&#xA;        &lt;sql>&#xA;           DROP VIEW IF EXISTS soop_trv_trajectory_map;&#xA;           CREATE VIEW soop_trv_trajectory_map AS &#xA;           SELECT a.trip_id,&#xA;            a.metadata_uuid, &#xA;            timezone('UTC'::text, a.time_coverage_start) AS time_coverage_start, &#xA;            timezone('UTC'::text, a.time_coverage_end) AS time_coverage_end, &#xA;            a.colour,&#xA;            a.&quot;TURB_b&quot;, &#xA;            a.&quot;CPHL_b&quot;, &#xA;            a.&quot;TEMP_b&quot;,&#xA;            a.&quot;PSAL_b&quot;, &#xA;            a.geom, &#xA;            (SELECT DISTINCT deployments.platform_code&#xA;             FROM deployments&#xA;             WHERE deployments.trip_id = a.trip_id) AS platform_code,&#xA;            (SELECT DISTINCT deployments.vessel_name&#xA;             FROM deployments&#xA;             WHERE deployments.trip_id = a.trip_id) AS vessel_name&#xA;            FROM visualisation_wms a;&#xA;    &lt;/sql>&#xA; &lt;/changeSet>&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;data_view&quot; runOnChange=&quot;true&quot;>&#xA;        &lt;sql>&#xA;           DROP VIEW IF EXISTS soop_trv_trajectory_data;&#xA;CREATE OR REPLACE VIEW soop_trv_trajectory_data AS &#xA;SELECT measurements_merged_data.trip_id, &#xA;visualisation_wms.vessel_name,&#xA;timezone('UTC'::text, measurements_merged_data.&quot;TIME&quot;) AS &quot;TIME&quot;, &#xA;measurements_merged_data.&quot;LATITUDE&quot;, &#xA;measurements_merged_data.&quot;LONGITUDE&quot;, &#xA;measurements_merged_data.&quot;TURB&quot;, &#xA;measurements_merged_data.&quot;TEMP&quot;, &#xA;measurements_merged_data.&quot;PSAL&quot;, &#xA;measurements_merged_data.&quot;CPHL&quot;, &#xA;measurements_merged_data.&quot;TURB&quot; IS NOT NULL AS &quot;TURB_b&quot;, &#xA;measurements_merged_data.&quot;TEMP&quot; IS NOT NULL AS &quot;TEMP_b&quot;,&#xA;measurements_merged_data.&quot;PSAL&quot; IS NOT NULL AS &quot;PSAL_b&quot;,&#xA;measurements_merged_data.&quot;CPHL&quot; IS NOT NULL AS &quot;CPHL_b&quot;, &#xA;measurements_merged_data.geom&#xA;   FROM measurements_merged_data&#xA;   JOIN visualisation_wms ON visualisation_wms.trip_id = measurements_merged_data.trip_id&#xA;ORDER BY timezone('UTC'::text, measurements_merged_data.&quot;TIME&quot;);&#xA;&#xA;    &lt;/sql>&#xA; &lt;/changeSet>&#xA;&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;createIndexOnMeasurementTables&quot; runOnChange=&quot;true&quot;>&#xA;        &lt;sql>&#xA;CREATE INDEX measurements_cphl_trip_id_idx&#xA;  ON soop_trv.measurements_cphl&#xA;  USING btree&#xA;  (trip_id, &quot;TIME&quot;);&#xA;&#xA;CREATE INDEX measurements_psal_trip_id_idx&#xA;  ON soop_trv.measurements_psal&#xA;  USING btree&#xA;  (trip_id, &quot;TIME&quot;);&#xA;&#xA;CREATE INDEX measurements_temp_trip_id_idx&#xA;  ON soop_trv.measurements_temp&#xA;  USING btree&#xA;  (trip_id, &quot;TIME&quot;);&#xA;&#xA;CREATE INDEX measurements_turb_trip_id_idx&#xA;  ON soop_trv.measurements_turb&#xA;  USING btree&#xA;  (trip_id, &quot;TIME&quot;);&#xA;&#xA;CREATE INDEX table_master_trip_id_idx&#xA;  ON soop_trv.table_master&#xA;  USING btree&#xA;  (trip_id, &quot;TIME&quot;);&#xA;    &lt;/sql>&#xA; &lt;/changeSet>&#xA;&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;createIndexOnMeasurementMergedTable&quot; runOnChange=&quot;true&quot;>&#xA;  &lt;sql>&#xA;    CREATE INDEX measurements_merged_data_gist_idx ON measurements_merged_data USING GIST (geom);&#xA;  &lt;/sql>&#xA; &lt;/changeSet>&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;createIndexOnMeasurementMergedTable_tripTime&quot; runOnChange=&quot;true&quot;>&#xA;  &lt;sql>&#xA;&#x9;CREATE INDEX measurements_mergedtriptime_idx ON measurements_merged_data USING btree (trip_id, &quot;TIME&quot;);&#xA;        CREATE INDEX measurements_mergedtrip_idx ON measurements_merged_data USING btree (trip_id);&#xA;  &lt;/sql>&#xA; &lt;/changeSet>&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;clean_dataFUNCTION&quot; runOnChange=&quot;true&quot; >&#xA;&lt;createProcedure>&#xA;&#xA;CREATE OR REPLACE FUNCTION clean_data(p_file_id integer)&#xA;  RETURNS void AS&#xA;'  declare&#xA;     v_url text;&#xA;     v_trip_id int;&#xA;  BEGIN&#xA;     select url into v_url from indexed_file where id = $1;&#xA;     select distinct trip_id into v_trip_id from deployments where &#xA;file_id = $1;&#xA;&#xA;     IF v_url ~ ''IMOS_SOOP-TRV_B'' THEN&#xA;           delete from  measurements_cphl  where file_id = $1;&#xA;           update measurements_merged_data set &quot;CPHL&quot; = NULL where  measurements_merged_data.trip_id = v_trip_id ;&#xA;     update  visualisation_wms set &quot;CPHL_b&quot; = false WHERE visualisation_wms.trip_id = v_trip_id ;&#xA;&#xA;     ELSIF v_url ~ ''IMOS_SOOP-TRV_S'' THEN&#xA;            delete from  measurements_psal  where file_id = $1;&#xA;            update measurements_merged_data set &quot;PSAL&quot; = NULL where measurements_merged_data.trip_id = v_trip_id ;&#xA;          update  visualisation_wms set &quot;PSAL_b&quot; = false WHERE visualisation_wms.trip_id = v_trip_id ;&#xA;&#xA;     ELSIF v_url ~ ''IMOS_SOOP-TRV_T'' THEN&#xA;          delete from  measurements_temp  where file_id = $1;&#xA;          update measurements_merged_data set &quot;TEMP&quot; = NULL where measurements_merged_data.trip_id = v_trip_id;&#xA;          update  visualisation_wms set &quot;TEMP_b&quot; = false WHERE visualisation_wms.trip_id = v_trip_id ;&#xA;&#xA;     ELSIF v_url ~ ''IMOS_SOOP-TRV_U'' THEN&#xA;          delete from  measurements_turb  where file_id = $1;&#xA;          update measurements_merged_data set &quot;TURB&quot; = NULL where measurements_merged_data.trip_id = v_trip_id ;&#xA;          update  visualisation_wms set &quot;TURB_b&quot; = false WHERE visualisation_wms.trip_id = v_trip_id ;&#xA;&#xA;     END IF;&#xA;    &#xA;     DELETE FROM measurements_merged_data where &quot;TURB&quot; IS NULL AND &quot;TEMP&quot; IS NULL AND &quot;CPHL&quot; IS NULL AND &quot;PSAL&quot; IS NULL and trip_id = v_trip_id ;&#xA;     DELETE FROM visualisation_wms where &quot;TURB_b&quot; IS False AND &quot;TEMP_b&quot; IS False AND &quot;CPHL_b&quot; IS False AND &quot;PSAL_b&quot; IS False and trip_id = v_trip_id ;&#xA;  &#xA;  END;'&#xA;  LANGUAGE plpgsql VOLATILE&#xA;&lt;/createProcedure>&#xA; &lt;/changeSet>&#xA;&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;truncateCorruptedTableToReprocessAllWFSData&quot; runOnChange=&quot;true&quot;>&#xA;  &lt;sql>&#xA;     TRUNCATE measurements_merged_data;&#xA;  &lt;/sql>&#xA;&lt;/changeSet>&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;duplicate_view&quot; runOnChange=&quot;true&quot;>&#xA;        &lt;sql>&#xA;&lt;![CDATA[ &#xA;           DROP VIEW IF EXISTS soop_trv_duplicate_ls;&#xA;CREATE OR REPLACE VIEW soop_trv_duplicate_url AS &#xA;with du AS (&#xA;&#x9;SELECT aims_channel_id, max(date_created) as latest_creation_date&#xA;&#x9;FROM deployments d &#xA;&#x9;GROUP BY aims_channel_id  HAVING COUNT(*) > 1&#xA;&#x9;)&#xA;select f.url, d.time_coverage_end, d.aims_channel_id&#xA;from du, deployments d&#xA;JOIN indexed_file f ON d.file_id = f.id&#xA;where d.aims_channel_id = du.aims_channel_id and d.date_created &lt; du.latest_creation_date and f.deleted = false&#xA;ORDER BY d.platform_code, d.trip_id, d.aims_channel_id, d.date_created;&#xA;]]>&#xA;    &lt;/sql>&#xA; &lt;/changeSet>&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;createIndexOnMeasurementMerged&quot; runOnChange=&quot;true&quot;>&#xA;        &lt;sql>&#xA;CREATE INDEX measurements_mergedtime_idx&#xA;  ON measurements_merged_data&#xA;  USING btree&#xA;  (&quot;TIME&quot;);&#xA;    &lt;/sql>&#xA; &lt;/changeSet>&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;replaceBadIdxOnTime&quot; runOnChange=&quot;true&quot;>&#xA;    &lt;sql>&#xA;    DROP INDEX IF EXISTS measurements_mergedtime_idx;&#xA;    CREATE INDEX measurements_mergedtime_idx ON measurements_merged_data USING btree(timezone('UTC'::text, &quot;TIME&quot;));&#xA;&#xA;    DROP INDEX IF EXISTS measurements_mergedtriptime_idx;&#xA;    CREATE INDEX measurements_mergedtriptime_idx ON measurements_merged_data USING btree (trip_id, timezone('UTC'::text, &quot;TIME&quot;));&#xA;&#xA;    &lt;/sql>&#xA; &lt;/changeSet>&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;update_idx_1&quot; runOnChange=&quot;true&quot;>&#xA;    &lt;sql>&#xA;    DROP INDEX table_master_gist_idx;&#xA;    DROP INDEX table_master_trip_id_idx; &#xA;&#xA;    CREATE INDEX turb_trip_idx ON measurements_turb USING btree(trip_id);&#xA;    CREATE INDEX psal_trip_idx ON measurements_psal USING btree(trip_id);&#xA;    CREATE INDEX temp_trip_idx ON measurements_temp USING btree(trip_id);&#xA;    CREATE INDEX cphl_trip_idx ON measurements_cphl USING btree(trip_id);&#xA;&#xA;    &lt;/sql>&#xA; &lt;/changeSet>&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;create_file_idx&quot; runOnChange=&quot;true&quot;>&#xA;    &lt;sql>&#xA;    CREATE INDEX IF NOT EXISTS turb_file_idx ON measurements_turb USING btree(file_id);&#xA;    CREATE INDEX IF NOT EXISTS psal_file_idx ON measurements_psal USING btree(file_id);&#xA;    CREATE INDEX IF NOT EXISTS temp_file_idx ON measurements_temp USING btree(file_id);&#xA;    CREATE INDEX IF NOT EXISTS cphl_file_idx ON measurements_cphl USING btree(file_id);&#xA;    &lt;/sql>&#xA; &lt;/changeSet>&#xA;&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;delete_undeleted_tracks_FUNCTION&quot; runOnChange=&quot;true&quot; >&#xA;&lt;createProcedure>&#xA;&#x9;CREATE OR REPLACE FUNCTION delete_undeleted_tracks()&#xA;  RETURNS void AS&#xA;'  &#xA;DECLARE&#xA;   var int;&#xA;BEGIN&#xA;   FOR var IN&#xA;      (SELECT distinct(file_id) from deployments where file_id  in (select id from indexed_file where deleted is True ))&#xA;   LOOP&#xA;      PERFORM clean_data(var);&#xA;      DELETE FROM deployments where file_id = var;&#xA;      COMMIT;&#xA;   END LOOP;&#xA;END;'&#xA;LANGUAGE plpgsql VOLATILE;&#xA;&lt;/createProcedure>&#xA; &lt;/changeSet>&#xA; &#xA;&lt;/databaseChangeLog>&#xA;"/>
    <elementParameter field="TEXT" name="LABEL" value="liquidBade_createTables"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
  </node>
  <node componentName="tPostgresqlRow" componentVersion="0.102" offsetLabelX="0" offsetLabelY="0" posX="960" posY="576">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="tPostgresqlRow_2" show="false"/>
    <elementParameter field="CHECK" name="USE_EXISTING_CONNECTION" value="false"/>
    <elementParameter field="COMPONENT_LIST" name="CONNECTION" value="" show="false"/>
    <elementParameter field="CLOSED_LIST" name="DB_VERSION" value="PRIOR_TO_V9"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema"/>
    <elementParameter field="TEXT" name="TYPE" value="POSTGRESQL" show="false"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login"/>
    <elementParameter field="PASSWORD" name="PASS" value="8pW6Nmy2kuc8D4KM9GKIHFjfbxE3isCHr24cFevwCvw="/>
    <elementParameter field="DBTABLE" name="TABLE" value="&quot;&quot;"/>
    <elementParameter field="QUERYSTORE_TYPE" name="QUERYSTORE" value="&quot;&quot;"/>
    <elementParameter field="TECHNICAL" name="QUERYSTORE:REPOSITORY_QUERYSTORE_TYPE" value="" show="false"/>
    <elementParameter field="TECHNICAL" name="QUERYSTORE:QUERYSTORE_TYPE" value="BUILT_IN"/>
    <elementParameter field="MEMO_SQL" name="QUERY" value="&quot;DELETE FROM visualisation_wms where \&quot;TURB_b\&quot; = FALSE AND   \&quot;TEMP_b\&quot;  = FALSE AND  \&quot;CPHL_b\&quot;  = FALSE AND  \&quot;PSAL_b\&quot;  = FALSE;&quot;&#xA;"/>
    <elementParameter field="LABEL" name="NOTE" value="This option only applies when deploying and running in the Talend Runtime"/>
    <elementParameter field="CHECK" name="SPECIFY_DATASOURCE_ALIAS" value="false"/>
    <elementParameter field="TEXT" name="DATASOURCE_ALIAS" value="&quot;&quot;" show="false"/>
    <elementParameter field="CHECK" name="DIE_ON_ERROR" value="true"/>
    <elementParameter field="CHECK" name="PROPAGATE_RECORD_SET" value="false"/>
    <elementParameter field="COLUMN_LIST" name="RECORD_SET_COLUMN" value="" show="false"/>
    <elementParameter field="CHECK" name="USE_PREPAREDSTATEMENT" value="false"/>
    <elementParameter field="TABLE" name="SET_PREPAREDSTATEMENT_PARAMETERS" show="false"/>
    <elementParameter field="ENCODING_TYPE" name="ENCODING" value="&quot;ISO-8859-15&quot;" show="false"/>
    <elementParameter field="TECHNICAL" name="ENCODING:ENCODING_TYPE" value="ISO-8859-15"/>
    <elementParameter field="TEXT" name="COMMIT_EVERY" value="10000"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
    <metadata connector="FLOW" name="tPostgresqlRow_2"/>
    <metadata connector="REJECT" name="REJECT">
      <column defaultValue="" key="false" length="255" name="errorCode" nullable="true" precision="0" sourceType="" type="id_String" usefulColumn="true"/>
      <column defaultValue="" key="false" length="255" name="errorMessage" nullable="true" precision="0" sourceType="" type="id_String" usefulColumn="true"/>
    </metadata>
  </node>
  <node componentName="tPostgresqlRow" componentVersion="0.102" offsetLabelX="0" offsetLabelY="0" posX="928" posY="288">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="tPostgresqlRow_3" show="false"/>
    <elementParameter field="CHECK" name="USE_EXISTING_CONNECTION" value="false"/>
    <elementParameter field="COMPONENT_LIST" name="CONNECTION" value="" show="false"/>
    <elementParameter field="CLOSED_LIST" name="DB_VERSION" value="PRIOR_TO_V9"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema"/>
    <elementParameter field="TEXT" name="TYPE" value="POSTGRESQL" show="false"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login"/>
    <elementParameter field="PASSWORD" name="PASS" value="8pW6Nmy2kuc8D4KM9GKIHFjfbxE3isCHr24cFevwCvw="/>
    <elementParameter field="DBTABLE" name="TABLE" value="&quot;&quot;"/>
    <elementParameter field="QUERYSTORE_TYPE" name="QUERYSTORE" value="&quot;&quot;"/>
    <elementParameter field="TECHNICAL" name="QUERYSTORE:REPOSITORY_QUERYSTORE_TYPE" value="" show="false"/>
    <elementParameter field="TECHNICAL" name="QUERYSTORE:QUERYSTORE_TYPE" value="BUILT_IN"/>
    <elementParameter field="MEMO_SQL" name="QUERY" value="&quot;TRUNCATE TABLE table_master;&quot;&#xA;"/>
    <elementParameter field="LABEL" name="NOTE" value="This option only applies when deploying and running in the Talend Runtime"/>
    <elementParameter field="CHECK" name="SPECIFY_DATASOURCE_ALIAS" value="false"/>
    <elementParameter field="TEXT" name="DATASOURCE_ALIAS" value="&quot;&quot;" show="false"/>
    <elementParameter field="CHECK" name="DIE_ON_ERROR" value="true"/>
    <elementParameter field="CHECK" name="PROPAGATE_RECORD_SET" value="false"/>
    <elementParameter field="COLUMN_LIST" name="RECORD_SET_COLUMN" value="" show="false"/>
    <elementParameter field="CHECK" name="USE_PREPAREDSTATEMENT" value="false"/>
    <elementParameter field="TABLE" name="SET_PREPAREDSTATEMENT_PARAMETERS" show="false"/>
    <elementParameter field="ENCODING_TYPE" name="ENCODING" value="&quot;ISO-8859-15&quot;" show="false"/>
    <elementParameter field="TECHNICAL" name="ENCODING:ENCODING_TYPE" value="ISO-8859-15"/>
    <elementParameter field="TEXT" name="COMMIT_EVERY" value="10000"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
    <metadata connector="FLOW" name="tPostgresqlRow_3"/>
    <metadata connector="REJECT" name="REJECT">
      <column defaultValue="" key="false" length="255" name="errorCode" nullable="true" precision="0" sourceType="" type="id_String" usefulColumn="true"/>
      <column defaultValue="" key="false" length="255" name="errorMessage" nullable="true" precision="0" sourceType="" type="id_String" usefulColumn="true"/>
    </metadata>
  </node>
  <node componentName="iNewOrModifiedFileList" componentVersion="0.1" offsetLabelX="0" offsetLabelY="0" posX="512" posY="288">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iNewOrModifiedFileList_1" show="false"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:PROPERTY_TYPE" value="REPOSITORY"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:REPOSITORY_PROPERTY_TYPE" value="_-CdwkAuPEeO-v4jR06LTxA" show="false"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server"/>
    <elementParameter field="TEXT" name="TYPE" value="POSTGRESQL" show="false"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login"/>
    <elementParameter field="TEXT" name="PASS" value="context.Destination_Password"/>
    <elementParameter field="TEXT" name="JOBNAME" value="&quot;index&quot;"/>
    <elementParameter field="TEXT" name="HARVEST_TYPE" value="&quot;data&quot;"/>
    <elementParameter field="RADIO" name="USE_DEFAULT" value="true"/>
    <elementParameter field="RADIO" name="USE_FILTER" value="false"/>
    <elementParameter field="TEXT" name="FILTER" value="&quot;%&quot;" show="false"/>
    <elementParameter field="RADIO" name="USE_CUSTOM_QUERY" value="false"/>
    <elementParameter field="MEMO" name="CUSTOM_QUERY" value="&#xA;        &quot;select indexed_file.id, indexed_file.url, indexed_file.modified &quot; +&#xA;        &quot;  from indexed_file &quot; +&#xA;        &quot;  join index_job &quot; +&#xA;        &quot;    on indexed_file.job_id = index_job.id &quot; +&#xA;        &quot;   and index_job.name = ? &quot; +&#xA;        &quot;  left join file_harvest &quot; +&#xA;        &quot;    on file_harvest.file_id = indexed_file.id &quot; +&#xA;        &quot;   and file_harvest.harvest_type = ? &quot; +&#xA;        &quot;   and file_harvest.last_change_type &lt;> 'deleted' &quot; +&#xA;        &quot; where (file_harvest.last_change_run &lt;> indexed_file.last_indexed_run &quot; +&#xA;        &quot;    or  file_harvest.last_change_run is null) &quot; +&#xA;        &quot;   and not indexed_file.deleted &quot;&#xA;      " show="false"/>
    <elementParameter field="CHECK" name="DIE_ON_ERROR" value="true"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
  </node>
  <node componentName="tRunJob" componentVersion="0.101" offsetLabelX="0" offsetLabelY="0" posX="704" posY="288">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="tRunJob_2" show="false"/>
    <elementParameter field="CHECK" name="USE_DYNAMIC_JOB" value="false"/>
    <elementParameter field="TEXT" name="CONTEXT_JOB" value="" show="false"/>
    <elementParameter field="PROCESS_TYPE" name="PROCESS" value="oneFileProcess"/>
    <elementParameter field="TECHNICAL" name="PROCESS:PROCESS_TYPE_CONTEXT" value="Default"/>
    <elementParameter field="TECHNICAL" name="PROCESS:PROCESS_TYPE_PROCESS" value="_XUeoALOwEeOieOMPOJ9pNQ"/>
    <elementParameter field="TECHNICAL" name="PROCESS:PROCESS_TYPE_VERSION" value="Latest"/>
    <elementParameter field="TEXT" name="CONTEXT_NAME" value="Default" show="false"/>
    <elementParameter field="CHECK" name="USE_INDEPENDENT_PROCESS" value="false"/>
    <elementParameter field="CHECK" name="DIE_ON_CHILD_ERROR" value="true"/>
    <elementParameter field="CHECK" name="TRANSMIT_WHOLE_CONTEXT" value="true"/>
    <elementParameter field="TABLE" name="CONTEXTPARAMS">
      <elementValue elementRef="PARAM_NAME_COLUMN" value="file_id"/>
      <elementValue elementRef="PARAM_VALUE_COLUMN" value="((Long)globalMap.get(&quot;iNewOrModifiedFileList_1_FILE_ID&quot;)).intValue()"/>
    </elementParameter>
    <elementParameter field="CHECK" name="PROPAGATE_CHILD_RESULT" value="false"/>
    <elementParameter field="CHECK" name="PRINT_PARAMETER" value="false"/>
    <elementParameter field="CHECK" name="TRANSMIT_ORIGINAL_CONTEXT" value="true" show="false"/>
    <elementParameter field="TEXT" name="LABEL" value="__PROCESS__"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
    <metadata connector="FLOW" name="tRunJob_2"/>
  </node>
  <node componentName="iDeletedFileList" componentVersion="0.1" offsetLabelX="0" offsetLabelY="0" posX="512" posY="576">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iDeletedFileList_1" show="false"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:PROPERTY_TYPE" value="REPOSITORY"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:REPOSITORY_PROPERTY_TYPE" value="_-CdwkAuPEeO-v4jR06LTxA" show="false"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server"/>
    <elementParameter field="TEXT" name="TYPE" value="POSTGRESQL" show="false"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login"/>
    <elementParameter field="TEXT" name="PASS" value="context.Destination_Password"/>
    <elementParameter field="TEXT" name="JOBNAME" value="&quot;index&quot;"/>
    <elementParameter field="TEXT" name="HARVEST_TYPE" value="&quot;data&quot;"/>
    <elementParameter field="RADIO" name="USE_DEFAULT" value="true"/>
    <elementParameter field="RADIO" name="USE_FILTER" value="false"/>
    <elementParameter field="TEXT" name="FILTER" value="&quot;%&quot;" show="false"/>
    <elementParameter field="RADIO" name="USE_CUSTOM_QUERY" value="false"/>
    <elementParameter field="MEMO" name="CUSTOM_QUERY" value="&#xA;          &quot; select indexed_file.id, indexed_file.url, indexed_file.modified&quot;&#xA;        + &quot;   from indexed_file&quot;&#xA;        + &quot;   join index_job on (indexed_file.job_id = index_job.id)&quot;&#xA;        + &quot;   join file_harvest on (file_harvest.file_id = indexed_file.id)&quot;&#xA;        + &quot; where indexed_file.deleted&quot;&#xA;        + &quot;   and file_harvest.last_change_type &lt;> 'deleted'&quot;&#xA;        + &quot;   and index_job.name = ?&quot;&#xA;        + &quot;   and file_harvest.harvest_type = ?&quot;&#xA;      " show="false"/>
    <elementParameter field="CHECK" name="DIE_ON_ERROR" value="true"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
  </node>
  <node componentName="tPostgresqlRow" componentVersion="0.102" offsetLabelX="0" offsetLabelY="0" posX="704" posY="576">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="tPostgresqlRow_1" show="false"/>
    <elementParameter field="CHECK" name="USE_EXISTING_CONNECTION" value="false"/>
    <elementParameter field="COMPONENT_LIST" name="CONNECTION" value="" show="false"/>
    <elementParameter field="CLOSED_LIST" name="DB_VERSION" value="PRIOR_TO_V9"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema"/>
    <elementParameter field="TEXT" name="TYPE" value="POSTGRESQL" show="false"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login"/>
    <elementParameter field="PASSWORD" name="PASS" value="8pW6Nmy2kuc8D4KM9GKIHFjfbxE3isCHr24cFevwCvw="/>
    <elementParameter field="DBTABLE" name="TABLE" value="&quot;&quot;"/>
    <elementParameter field="QUERYSTORE_TYPE" name="QUERYSTORE" value="&quot;&quot;"/>
    <elementParameter field="TECHNICAL" name="QUERYSTORE:REPOSITORY_QUERYSTORE_TYPE" value="" show="false"/>
    <elementParameter field="TECHNICAL" name="QUERYSTORE:QUERYSTORE_TYPE" value="BUILT_IN"/>
    <elementParameter field="MEMO_SQL" name="QUERY" value="&quot; SELECT clean_data(&quot; + ((Long)globalMap.get(&quot;iDeletedFileList_1_FILE_ID&quot;)).intValue() + &quot;) ;&#xA;DELETE FROM deployments where file_id = &quot; + ((Long)globalMap.get(&quot;iDeletedFileList_1_FILE_ID&quot;)).intValue() + &quot; ;&#xA;DELETE FROM indexed_file where id = &quot; + ((Long)globalMap.get(&quot;iDeletedFileList_1_FILE_ID&quot;)).intValue() + &quot; ;&#xA;DELETE FROM file_harvest where id = &quot; + ((Long)globalMap.get(&quot;iDeletedFileList_1_FILE_ID&quot;)).intValue() + &quot; ; &quot;"/>
    <elementParameter field="LABEL" name="NOTE" value="This option only applies when deploying and running in the Talend Runtime"/>
    <elementParameter field="CHECK" name="SPECIFY_DATASOURCE_ALIAS" value="false"/>
    <elementParameter field="TEXT" name="DATASOURCE_ALIAS" value="&quot;&quot;" show="false"/>
    <elementParameter field="CHECK" name="DIE_ON_ERROR" value="true"/>
    <elementParameter field="CHECK" name="PROPAGATE_RECORD_SET" value="false"/>
    <elementParameter field="COLUMN_LIST" name="RECORD_SET_COLUMN" value="" show="false"/>
    <elementParameter field="CHECK" name="USE_PREPAREDSTATEMENT" value="false"/>
    <elementParameter field="TABLE" name="SET_PREPAREDSTATEMENT_PARAMETERS" show="false"/>
    <elementParameter field="ENCODING_TYPE" name="ENCODING" value="&quot;ISO-8859-15&quot;" show="false"/>
    <elementParameter field="TECHNICAL" name="ENCODING:ENCODING_TYPE" value="ISO-8859-15"/>
    <elementParameter field="TEXT" name="COMMIT_EVERY" value="10000"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
    <metadata connector="FLOW" name="tPostgresqlRow_1"/>
    <metadata connector="REJECT" name="REJECT">
      <column defaultValue="" key="false" length="255" name="errorCode" nullable="true" precision="0" sourceType="" type="id_String" usefulColumn="true"/>
      <column defaultValue="" key="false" length="255" name="errorMessage" nullable="true" precision="0" sourceType="" type="id_String" usefulColumn="true"/>
    </metadata>
  </node>
  <node componentName="iPostgresqlDbUpdate" componentVersion="0.1" offsetLabelX="-15" offsetLabelY="32" posX="0" posY="352">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_2" show="false"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:PROPERTY_TYPE" value="REPOSITORY"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:REPOSITORY_PROPERTY_TYPE" value="_-CdwkAuPEeO-v4jR06LTxA" show="false"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server"/>
    <elementParameter field="TEXT" name="TYPE" value="POSTGRESQL" show="false"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login"/>
    <elementParameter field="TEXT" name="PASS" value="context.Destination_Password"/>
    <elementParameter field="FILE" name="FILENAME" value="&quot;/home/craigj/TOS_DI-r96646-V5.1.3/workspace/changelog.xml&quot;" show="false"/>
    <elementParameter field="CHECK" name="USE_INLINE_CONTENT" value="true"/>
    <elementParameter field="MEMO" name="INLINE_CONTENT" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?>&#xA;&lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd&quot;>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1375428625889-1&quot;>&#xA;        &lt;createTable tableName=&quot;attribute&quot;>&#xA;            &lt;column name=&quot;file_id&quot; type=&quot;int8&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;container&quot; type=&quot;TEXT&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;name&quot; type=&quot;TEXT&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;type&quot; type=&quot;TEXT&quot;/>&#xA;            &lt;column name=&quot;value&quot; type=&quot;TEXT&quot;/>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;    &#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1375428625889-2&quot;>&#xA;        &lt;createTable tableName=&quot;file&quot;>&#xA;            &lt;column name=&quot;file_id&quot; type=&quot;int8&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot; primaryKey=&quot;true&quot; primaryKeyName=&quot;file_pk&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;url&quot; type=&quot;TEXT&quot;/>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;    &#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1375428625889-6&quot;>&#xA;        &lt;createTable tableName=&quot;variable&quot;>&#xA;            &lt;column name=&quot;file_id&quot; type=&quot;int8&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;name&quot; type=&quot;TEXT&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;type&quot; type=&quot;TEXT&quot;/>&#xA;            &lt;column name=&quot;dimensions&quot; type=&quot;TEXT&quot;/>&#xA;            &lt;column name=&quot;shape&quot; type=&quot;TEXT&quot;/>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;    &#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1375428625889-7&quot;>&#xA;        &lt;addPrimaryKey columnNames=&quot;file_id, container, name&quot; constraintName=&quot;attribute_pk&quot; tableName=&quot;attribute&quot;/>&#xA;    &lt;/changeSet>&#xA;    &#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1375428625889-8&quot;>&#xA;        &lt;addPrimaryKey columnNames=&quot;file_id, name&quot; constraintName=&quot;variable_pk&quot; tableName=&quot;variable&quot;/>&#xA;    &lt;/changeSet>&#xA;    &#xA;&lt;/databaseChangeLog>"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
  </node>
  <node componentName="iUpdateIndex" componentVersion="0.1" offsetLabelX="0" offsetLabelY="0" posX="-256" posY="352">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iUpdateIndex_1" show="false"/>
    <elementParameter field="CHECK" name="TSTATCATCHER_STATS" value="true"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:PROPERTY_TYPE" value="REPOSITORY"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:REPOSITORY_PROPERTY_TYPE" value="_-CdwkAuPEeO-v4jR06LTxA" show="false"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server"/>
    <elementParameter field="TEXT" name="TYPE" value="POSTGRESQL" show="false"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login"/>
    <elementParameter field="TEXT" name="PASS" value="context.Destination_Password"/>
    <elementParameter field="TEXT" name="JOBNAME" value="&quot;index&quot;"/>
    <elementParameter field="TEXT" name="BASE_PATH" value="context.base"/>
    <elementParameter field="FILE" name="MANIFEST_FILENAME" value="context.fileList"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
  </node>
  <node componentName="tRunJob" componentVersion="0.101" offsetLabelX="0" offsetLabelY="0" posX="256" posY="576">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="tRunJob_3" show="false"/>
    <elementParameter field="CHECK" name="USE_DYNAMIC_JOB" value="false"/>
    <elementParameter field="TEXT" name="CONTEXT_JOB" value="" show="false"/>
    <elementParameter field="PROCESS_TYPE" name="PROCESS" value="UpdateMetadata"/>
    <elementParameter field="TECHNICAL" name="PROCESS:PROCESS_TYPE_CONTEXT" value="Default"/>
    <elementParameter field="TECHNICAL" name="PROCESS:PROCESS_TYPE_PROCESS" value="_q9rUIE6bEeSegcAq0Za1rg"/>
    <elementParameter field="TECHNICAL" name="PROCESS:PROCESS_TYPE_VERSION" value="Latest"/>
    <elementParameter field="TEXT" name="CONTEXT_NAME" value="Default" show="false"/>
    <elementParameter field="CHECK" name="USE_INDEPENDENT_PROCESS" value="false"/>
    <elementParameter field="CHECK" name="DIE_ON_CHILD_ERROR" value="true"/>
    <elementParameter field="CHECK" name="TRANSMIT_WHOLE_CONTEXT" value="true"/>
    <elementParameter field="TABLE" name="CONTEXTPARAMS"/>
    <elementParameter field="CHECK" name="PROPAGATE_CHILD_RESULT" value="false"/>
    <elementParameter field="CHECK" name="PRINT_PARAMETER" value="false"/>
    <elementParameter field="CHECK" name="TRANSMIT_ORIGINAL_CONTEXT" value="true" show="false"/>
    <elementParameter field="TEXT" name="LABEL" value="__PROCESS__"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
    <metadata connector="FLOW" name="tRunJob_3"/>
  </node>
  <node componentName="tPostgresqlRow" componentVersion="0.102" offsetLabelX="0" offsetLabelY="0" posX="448" posY="96">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="tDBRow_1" show="false"/>
    <elementParameter field="CHECK" name="USE_EXISTING_CONNECTION" value="true"/>
    <elementParameter field="COMPONENT_LIST" name="CONNECTION" value="tDBConnection_1"/>
    <elementParameter field="CLOSED_LIST" name="DB_VERSION" value="PRIOR_TO_V9" show="false"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server" show="false"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port" show="false"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database" show="false"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema" show="false"/>
    <elementParameter field="TEXT" name="TYPE" value="PostgreSQL" show="false"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login" show="false"/>
    <elementParameter field="PASSWORD" name="PASS" value="8pW6Nmy2kuc8D4KM9GKIHFjfbxE3isCHr24cFevwCvw=" show="false"/>
    <elementParameter field="DBTABLE" name="TABLE" value="&quot;&quot;"/>
    <elementParameter field="QUERYSTORE_TYPE" name="QUERYSTORE" value="&quot;&quot;"/>
    <elementParameter field="TECHNICAL" name="QUERYSTORE:REPOSITORY_QUERYSTORE_TYPE" value="" show="false"/>
    <elementParameter field="TECHNICAL" name="QUERYSTORE:QUERYSTORE_TYPE" value="BUILT_IN"/>
    <elementParameter field="MEMO_SQL" name="QUERY" value="&quot;&#xA;with table_duplicate as (select distinct file_id, trip_id, url, first_indexed, deleted&#xA;  from measurements_turb &#xA;  join indexed_file on (indexed_file.id = measurements_turb.file_id) &#xA;where deleted = True)&#xA;DELETE FROM measurements_turb  WHERE file_id IN (select file_id from table_duplicate); &#xA;&#xA;with table_duplicate as (select distinct file_id, trip_id, url, first_indexed, deleted&#xA;  from measurements_psal &#xA;  join indexed_file on (indexed_file.id = measurements_psal.file_id) &#xA;where deleted = True)&#xA;DELETE FROM measurements_psal  WHERE file_id IN (select file_id from table_duplicate); &#xA;&#xA;with table_duplicate as (select distinct file_id, trip_id, url, first_indexed, deleted&#xA;  from measurements_cphl&#xA;  join indexed_file on (indexed_file.id = measurements_cphl.file_id) &#xA;where deleted = True)&#xA;DELETE FROM measurements_cphl  WHERE file_id IN (select file_id from table_duplicate); &#xA;&#xA;with table_duplicate as (select distinct file_id, trip_id, url, first_indexed, deleted&#xA;  from measurements_temp &#xA;  join indexed_file on (indexed_file.id = measurements_temp.file_id) &#xA;where deleted = True)&#xA;DELETE FROM measurements_temp  WHERE file_id IN (select file_id from table_duplicate); &#xA;&#xA;SELECT delete_undeleted_tracks();&#xA;&quot;"/>
    <elementParameter field="LABEL" name="NOTE" value="This option only applies when deploying and running in the Talend Runtime" show="false"/>
    <elementParameter field="CHECK" name="SPECIFY_DATASOURCE_ALIAS" value="false" show="false"/>
    <elementParameter field="TEXT" name="DATASOURCE_ALIAS" value="&quot;&quot;" show="false"/>
    <elementParameter field="CHECK" name="DIE_ON_ERROR" value="false"/>
    <elementParameter field="CHECK" name="PROPAGATE_RECORD_SET" value="false"/>
    <elementParameter field="COLUMN_LIST" name="RECORD_SET_COLUMN" value="" show="false"/>
    <elementParameter field="CHECK" name="USE_PREPAREDSTATEMENT" value="false"/>
    <elementParameter field="TABLE" name="SET_PREPAREDSTATEMENT_PARAMETERS" show="false"/>
    <elementParameter field="ENCODING_TYPE" name="ENCODING" value="&quot;ISO-8859-15&quot;" show="false"/>
    <elementParameter field="TECHNICAL" name="ENCODING:ENCODING_TYPE" value="ISO-8859-15"/>
    <elementParameter field="TEXT" name="COMMIT_EVERY" value="10000" show="false"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
    <metadata connector="FLOW" name="tDBRow_1"/>
    <metadata connector="REJECT" name="REJECT">
      <column defaultValue="" key="false" length="255" name="errorCode" nullable="true" precision="0" sourceType="" type="id_String" originalLength="-1" usefulColumn="true"/>
      <column defaultValue="" key="false" length="255" name="errorMessage" nullable="true" precision="0" sourceType="" type="id_String" originalLength="-1" usefulColumn="true"/>
    </metadata>
  </node>
  <node componentName="tPostgresqlCommit" componentVersion="0.102" offsetLabelX="0" offsetLabelY="0" posX="576" posY="96">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="tDBCommit_1" show="false"/>
    <elementParameter field="COMPONENT_LIST" name="CONNECTION" value="tDBConnection_1"/>
    <elementParameter field="CHECK" name="CLOSE" value="false"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
    <metadata connector="FLOW" name="tDBCommit_1"/>
  </node>
  <node componentName="tPostgresqlConnection" componentVersion="0.102" offsetLabelX="0" offsetLabelY="0" posX="256" posY="96">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="tDBConnection_1" show="false"/>
    <elementParameter field="CLOSED_LIST" name="DB_VERSION" value="PRIOR_TO_V9"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server"/>
    <elementParameter field="TEXT" name="TYPE" value="POSTGRESQL" show="false"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login"/>
    <elementParameter field="PASSWORD" name="PASS" value="8pW6Nmy2kuc8D4KM9GKIHFjfbxE3isCHr24cFevwCvw="/>
    <elementParameter field="ENCODING_TYPE" name="ENCODING" value="&quot;ISO-8859-15&quot;" show="false"/>
    <elementParameter field="TECHNICAL" name="ENCODING:ENCODING_TYPE" value="ISO-8859-15"/>
    <elementParameter field="CHECK" name="USE_SHARED_CONNECTION" value="false"/>
    <elementParameter field="TEXT" name="SHARED_CONNECTION_NAME" value="" show="false"/>
    <elementParameter field="LABEL" name="NOTE" value="This option only applies when deploying and running in the Talend Runtime"/>
    <elementParameter field="CHECK" name="SPECIFY_DATASOURCE_ALIAS" value="false"/>
    <elementParameter field="TEXT" name="DATASOURCE_ALIAS" value="&quot;&quot;" show="false"/>
    <elementParameter field="CHECK" name="AUTO_COMMIT" value="false"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
  </node>
  <node componentName="tPostgresqlClose" componentVersion="0.102" offsetLabelX="0" offsetLabelY="0" posX="704" posY="96">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="tDBClose_1" show="false"/>
    <elementParameter field="COMPONENT_LIST" name="CONNECTION" value="tDBConnection_1"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
  </node>
  <connection connectorName="SUBJOB_OK" label="OnSubjobOk" lineStyle="1" metaname="iPostgresqlDbUpdate_1" offsetLabelX="0" offsetLabelY="0" outputId="1" source="iPostgresqlDbUpdate_1" target="tDBConnection_1">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="OnSubjobOk5" show="false"/>
  </connection>
  <connection connectorName="SUBJOB_OK" label="OnSubjobOk" lineStyle="1" metaname="iPostgresqlDbUpdate_1" offsetLabelX="0" offsetLabelY="0" outputId="2" source="iPostgresqlDbUpdate_1" target="iNewOrModifiedFileList_1">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="OnSubjobOk6" show="false"/>
  </connection>
  <connection connectorName="SUBJOB_OK" label="OnSubjobOk" lineStyle="1" metaname="iPostgresqlDbUpdate_1" offsetLabelX="0" offsetLabelY="0" outputId="3" source="iPostgresqlDbUpdate_1" target="iDeletedFileList_1">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="OnSubjobOk7" show="false"/>
  </connection>
  <connection connectorName="SUBJOB_OK" label="OnSubjobOk" lineStyle="1" metaname="iPostgresqlDbUpdate_1" offsetLabelX="0" offsetLabelY="0" outputId="4" source="iPostgresqlDbUpdate_1" target="tRunJob_3">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="OnSubjobOk8" show="false"/>
  </connection>
  <connection connectorName="ITERATE" label="Iterate" lineStyle="7" metaname="iNewOrModifiedFileList_1" offsetLabelX="0" offsetLabelY="0" source="iNewOrModifiedFileList_1" target="tRunJob_2">
    <elementParameter field="CHECK" name="ENABLE_PARALLEL" value="false"/>
    <elementParameter field="TEXT" name="NUMBER_PARALLEL" value="2" show="false"/>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iterate3" show="false"/>
  </connection>
  <connection connectorName="COMPONENT_OK" label="OnComponentOk" lineStyle="3" metaname="tRunJob_2" offsetLabelX="0" offsetLabelY="0" source="tRunJob_2" target="tPostgresqlRow_3">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="OnComponentOk4" show="false"/>
  </connection>
  <connection connectorName="ITERATE" label="Iterate" lineStyle="7" metaname="iDeletedFileList_1" offsetLabelX="0" offsetLabelY="0" source="iDeletedFileList_1" target="tPostgresqlRow_1">
    <elementParameter field="CHECK" name="ENABLE_PARALLEL" value="false"/>
    <elementParameter field="TEXT" name="NUMBER_PARALLEL" value="2" show="false"/>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iterate4" show="false"/>
  </connection>
  <connection connectorName="COMPONENT_OK" label="OnComponentOk" lineStyle="3" metaname="tPostgresqlRow_1" offsetLabelX="0" offsetLabelY="0" source="tPostgresqlRow_1" target="tPostgresqlRow_2">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="OnComponentOk3" show="false"/>
  </connection>
  <connection connectorName="SUBJOB_OK" label="OnSubjobOk" lineStyle="1" metaname="iPostgresqlDbUpdate_2" offsetLabelX="0" offsetLabelY="0" source="iPostgresqlDbUpdate_2" target="iPostgresqlDbUpdate_1">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="OnSubjobOk2" show="false"/>
  </connection>
  <connection connectorName="SUBJOB_OK" label="OnSubjobOk" lineStyle="1" metaname="iUpdateIndex_1" offsetLabelX="0" offsetLabelY="0" source="iUpdateIndex_1" target="iPostgresqlDbUpdate_2">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="OnSubjobOk1" show="false"/>
  </connection>
  <connection connectorName="FLOW" label="row1" lineStyle="0" metaname="tDBRow_1" offsetLabelX="0" offsetLabelY="0" source="tDBRow_1" target="tDBCommit_1">
    <elementParameter field="CHECK" name="MONITOR_CONNECTION" value="false"/>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="row1" show="false"/>
  </connection>
  <connection connectorName="COMPONENT_OK" label="OnComponentOk" lineStyle="3" metaname="tDBCommit_1" offsetLabelX="0" offsetLabelY="0" source="tDBCommit_1" target="tDBClose_1">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="OnComponentOk1" show="false"/>
  </connection>
  <connection connectorName="SUBJOB_OK" label="OnSubjobOk" lineStyle="1" metaname="tDBConnection_1" offsetLabelX="0" offsetLabelY="0" source="tDBConnection_1" target="tDBRow_1">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="OnSubjobOk4" show="false"/>
  </connection>
  <subjob>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_1" show="false"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="160;190;240" show="false"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="220;220;250"/>
  </subjob>
  <subjob>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="tPostgresqlRow_2" show="false"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="160;190;240" show="false"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="220;220;250"/>
  </subjob>
  <subjob>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="tPostgresqlRow_3" show="false"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="160;190;240" show="false"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="220;220;250"/>
  </subjob>
  <subjob>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iNewOrModifiedFileList_1" show="false"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="160;190;240" show="false"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="220;220;250"/>
  </subjob>
  <subjob>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iDeletedFileList_1" show="false"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="160;190;240" show="false"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="220;220;250"/>
  </subjob>
  <subjob>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_2" show="false"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="160;190;240" show="false"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="220;220;250"/>
  </subjob>
  <subjob>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iUpdateIndex_1" show="false"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="160;190;240" show="false"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="220;220;250"/>
  </subjob>
  <subjob>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="tRunJob_3" show="false"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="160;190;240" show="false"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="220;220;250"/>
  </subjob>
  <subjob>
    <elementParameter field="CHECK" name="SHOW_SUBJOB_TITLE" value="true"/>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="tDBRow_1" show="false"/>
    <elementParameter field="TEXT" name="SUBJOB_TITLE" value="Clean duplicate data from measurements_tables*"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="92;131;150"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="207;226;236"/>
  </subjob>
  <subjob>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="tDBConnection_1" show="false"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="92;131;150" show="false"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="207;226;236"/>
  </subjob>
  <subjob>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="tDBClose_1" show="false"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="92;131;150" show="false"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="207;226;236"/>
  </subjob>
</talendfile:ProcessType>
